;武器カスタマイズ機能に関する処理群
;------------------------------------------------------------------------------------------------------------------------------

;武器カスタマイズ画面
;-------------------------------------------------
;ARG   = キャラ番号
;ARG:1 = キャラメイク中なら1
@WEAPON_CUSTOMIZE, ARG, ARG:1 = 0
#DIM CONST LENGTH = 60
$REPRINT
CALL LB
VARSET LOCAL
VARSET LOCALS
PRINTL ---///　　　　ＷＥＡＰＯＮ　ＣＵＳＴＯＭＩＺＥ　　///----------------
PRINTL 
PRINTFORML %NAME:ARG%　の現在の装備
CALL SHORTLINE
PRINTFORML ◆근거리武器
IF CSTR:ARG:5 != ""
	PRINTFORML ├[10]武器名 『%CSTR:ARG:5%』
ELSE
	PRINTFORML ├[10]武器名 （설정されていません）
ENDIF
RESETCOLOR
CALL FSTYLE_ATTACK,ARG,1,1
PRINTFORML └[12]전투스타일　<<%FSTYLE_NAME_F(ARG,1)%>>%"", LENGTH - 40, LEFT%
PRINTFORM 　　　　　---> 威力　　　：【{RESULT}】
CALL SET_FSTYLE_INFO,ARG,1
PRINTFORML （ %RESULTS:0% ）
PRINTFORML 　　　　　---> %RESULTS:1%
PRINTFORML 　　　　　---> %RESULTS:2%

CALL SHORTLINE
PRINTFORML ◆중거리武器
IF CSTR:ARG:6 != ""
	PRINTFORML ├[20]武器名 『%CSTR:ARG:6%』
ELSE
	PRINTFORML ├[20]武器名 （설정されていません）
ENDIF
RESETCOLOR
CALL FSTYLE_ATTACK,ARG,2,1
PRINTFORML └[22]전투스타일　<<%FSTYLE_NAME_F(ARG,2)%>>%"", LENGTH - 40, LEFT%
PRINTFORM 　　　　　---> 威力　　　：【{RESULT}】
CALL SET_FSTYLE_INFO,ARG,2
PRINTFORML （ %RESULTS:0% ）
PRINTFORML 　　　　　---> %RESULTS:1%
PRINTFORML 　　　　　---> %RESULTS:2%

CALL SHORTLINE
PRINTFORML ◆원거리武器
IF CSTR:ARG:7 != ""
	PRINTFORML ├[30]武器名 『%CSTR:ARG:7%』
ELSE
	PRINTFORML ├[30]武器名 （설정されていません）
ENDIF
RESETCOLOR
CALL FSTYLE_ATTACK,ARG,3,1
PRINTFORML └[32]전투스타일　<<%FSTYLE_NAME_F(ARG,3)%>>%"", LENGTH - 40, LEFT%
PRINTFORM 　　　　　---> 威力　　　：【{RESULT}】
CALL SET_FSTYLE_INFO,ARG,3
PRINTFORML （ %RESULTS:0% ）
PRINTFORML 　　　　　---> %RESULTS:1%
PRINTFORML 　　　　　---> %RESULTS:2%
DRAWLINE
PRINTL  [999] 돌아간다
INPUT
IF RESULT == 999
	RETURN
ELSEIF RESULT == 10 || RESULT == 20 || RESULT == 30
	CALL SETTING_WEAPON_NAME, ARG, (RESULT / 10)
	GOTO REPRINT
ELSEIF RESULT == 12 || RESULT == 22 || RESULT == 32
	CALL SETTING_FSTYLE, ARG, (RESULT / 10)
	GOTO REPRINT
ELSE
	GOTO REPRINT
ENDIF






;무기의 이름を설정
@SETTING_WEAPON_NAME,ARG,ARG:1
$REPRINT
IF ARG:1 == 1
	PRINT 근거리
ELSEIF ARG:1 == 2
	PRINT 중거리
ELSEIF ARG:1 == 3
	PRINT 원거리
ENDIF
PRINTL 무기의 이름を決めてください
PRINT 現在の武器名：
IF CSTR:ARG:(ARG:1 + 4) != ""
	PRINTFORML 『%CSTR:ARG:(ARG:1 + 4)%』
ELSE
	PRINTFORML （武器名が설정されていません）
ENDIF
PRINTL 
PRINTL  [0]自分で入力する
PRINTL  [1]ランダム生成機能を使う
SIF CSTR:ARG:(ARG:1 + 4) == ""
	SETCOLOR 96, 96, 96
PRINTFORML  [\@CSTR:ARG:(ARG:1 + 4) == "" ? - # 2 \@]追加文字列の설정
RESETCOLOR
PRINTL  [3]消去する
SIF CSTR:ARG:5 != "" && ARG:1 != 1
	PRINTFORML  [4]근거리と同じ銘　『%CSTR:ARG:5%』
SIF CSTR:ARG:6 != "" && ARG:1 != 2
	PRINTFORML  [5]중거리と同じ銘　『%CSTR:ARG:6%』
SIF CSTR:ARG:7 != "" && ARG:1 != 3
	PRINTFORML  [6]원거리と同じ銘　『%CSTR:ARG:7%』
PRINTL  [999] 돌아간다
$INPUT_LOOP
INPUT
IF RESULT == 0
	CLEARLINE 1
	PRINTL 
	CALL SHORTLINE
	IF ARG:1 == 1
		PRINT 근거리
	ELSEIF ARG:1 == 2
		PRINT 중거리
	ELSEIF ARG:1 == 3
		PRINT 원거리
	ENDIF
	PRINTL 武器に설정する名前を入力してください：
	INPUTS
	IF ARG:1 == 1
		CSTR:ARG:5 = %RESULTS%
	ELSEIF ARG:1 == 2
		CSTR:ARG:6 = %RESULTS%
	ELSEIF ARG:1 == 3
		CSTR:ARG:7 = %RESULTS%
	ENDIF
	CDFLAG:ARG:(ARG:1):무기명원위치 = 0
	GOTO REPRINT
ELSEIF RESULT == 1
	CLEARLINE 1
	CALL GENERATE_WEAPON_STRS, 20
	IF ARG:1 == 1 && RESULT
		CSTR:ARG:5 = %RESULTS%
	ELSEIF ARG:1 == 2 && RESULT
		CSTR:ARG:6 = %RESULTS%
	ELSEIF ARG:1 == 3 && RESULT
		CSTR:ARG:7 = %RESULTS%
	ENDIF
	CDFLAG:ARG:(ARG:1):무기명원위치 = 0
	GOTO REPRINT
ELSEIF RESULT == 2 && CSTR:ARG:(ARG:1 + 4) != ""
	CLEARLINE 1
	CALL WEAPON_ADD_STRS, ARG, ARG:1
	IF RESULT
		CSTR:ARG:(ARG:1 + 4) = %RESULTS%
		CDFLAG:ARG:(ARG:1):무기명원위치 = RESULT
	ENDIF
	GOTO REPRINT
ELSEIF RESULT == 3
	CLEARLINE 1
	IF ARG:1 == 1
		CSTR:ARG:5 = 
	ELSEIF ARG:1 == 2
		CSTR:ARG:6 = 
	ELSEIF ARG:1 == 3
		CSTR:ARG:7 = 
	ENDIF
	CDFLAG:ARG:(ARG:1):무기명원위치 = 0
	PRINTL 武器名を消去しました
	PRINTW 
	GOTO REPRINT
ELSEIF RESULT == 4 && CSTR:ARG:5 != "" && ARG:1 != 1
	IF ARG:1 == 2
		CSTR:ARG:6 = %CSTR:ARG:5%
		CDFLAG:ARG:2:무기명원위치 = CDFLAG:ARG:1:무기명원위치
	ELSE
		CSTR:ARG:7 = %CSTR:ARG:5%
		CDFLAG:ARG:3:무기명원위치 = CDFLAG:ARG:1:무기명원위치
	ENDIF
	RETURN
ELSEIF RESULT == 5 && CSTR:ARG:6 != "" && ARG:1 != 2
	IF ARG:1 == 1
		CSTR:ARG:5 = %CSTR:ARG:6%
		CDFLAG:ARG:1:무기명원위치 = CDFLAG:ARG:2:무기명원위치
	ELSE
		CSTR:ARG:7 = %CSTR:ARG:6%
		CDFLAG:ARG:3:무기명원위치 = CDFLAG:ARG:2:무기명원위치
	ENDIF
	RETURN
ELSEIF RESULT == 6 && CSTR:ARG:7 != "" && ARG:1 != 3
	IF ARG:1 == 1
		CSTR:ARG:5 = %CSTR:ARG:7%
		CDFLAG:ARG:1:무기명원위치 = CDFLAG:ARG:3:무기명원위치
	ELSE
		CSTR:ARG:6 = %CSTR:ARG:7%
		CDFLAG:ARG:2:무기명원위치 = CDFLAG:ARG:3:무기명원위치
	ENDIF
	RETURN
ELSEIF RESULT == 999
	RETURN
ELSE
	GOTO INPUT_LOOP
ENDIF



;전투스타일を설정
@SETTING_FSTYLE,ARG,ARG:1
IF ARG:1 == 1
	PRINT 근거리
ELSEIF ARG:1 == 2
	PRINT 중거리
ELSEIF ARG:1 == 3
	PRINT 원거리
ENDIF
PRINTL 武器の전투스타일を選んでください
PRINTFORML 現在のスタイル：<<%FSTYLE_NAME_F(ARG,ARG:1)%>>
PRINTL 
PRINTL  [0] <<通常>>　　通常のスタイル　　　　　クセがなく扱いやすい　バースト공격の反動が小さい
PRINTL 
PRINTL  [1] <<連続>>　　민첩の高いキャラ向け　　２回공격できるので命中率はダントツ
PRINTL 
PRINTL  [2] <<装甲>>　　방어の高いキャラ向け　　ガードが固くなるので苦手な距離のサポートに
PRINTL 
PRINTL  [3] <<撹乱>>　　민첩の高いキャラ向け　　クリティカル率と威力が高いがガードは脆い
PRINTL 
PRINTL  [4] <<重撃>>　　방어の高いキャラ向け　　威力が高いが回避は期待できない
PRINTL 
PRINTL  [5] <<広範>>　　공격の高いキャラ向け　　直撃しなくても威力が高い
PRINTL 
PRINTL  [6] <<全力>>　　공격の高いキャラ向け　　非常に威力が高いが反動も大きい
PRINTL 
PRINTL  [7] <<知略>>　　지성の高いキャラ向け　　지성が高いほど直撃しやすい
PRINTL 
PRINTL  [8] <<設置>>　　지성の高いキャラ向け　　威力は低いが、相手に隙を作る追加効果を持つ
PRINTL 
PRINTL  [9] <<使役>>　　지성の高いキャラ向け　　状況に応じた多彩な공격方法が可能
PRINTL 
PRINTL  [999] 돌아간다
$INPUT_LOOP
INPUT
IF RESULT >= 0 && RESULT <= 9
	CLEARLINE 1
	IF ARG:1 == 1
		CDFLAG:ARG:근거리:전투스타일 = RESULT
	ELSEIF ARG:1 == 2
		CDFLAG:ARG:중거리:전투스타일 = RESULT
	ELSEIF ARG:1 == 3
		CDFLAG:ARG:원거리:전투스타일 = RESULT
	ENDIF
	RETURN
ELSEIF RESULT == 999
	RETURN
ELSE
	GOTO INPUT_LOOP
ENDIF



