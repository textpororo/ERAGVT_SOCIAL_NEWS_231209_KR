;--------------------------------------------------
;戦闘時に呼ばれるUI表示処理
@SHOW_STATUS
#DIM CHISEI_CAL
#DIM CCOUNT
RESETCOLOR

;--------------------------------------------------
;ここから表示
;--------------------------------------------------
;キャラの基礎스테이터스
CALL SHOW_STATUS_BASE_DISPBATTLE, TARGET



PRINTL 

PRINT 状態　　　
IF ISMALE()
	SETCOLOR 0, 180, 205
	PRINT [남자]
	SETCOLOR 255, 180, 180
	SIF TALENT:보추 > 0
		PRINT [보추]
ELSE
	IF TALENT:처녀 > 0
		SETCOLOR 255, 0, 255
	ELSEIF TALENT:처녀 == 0
		SETCOLOR 120, 0, 120
	ELSE
		SETCOLOR 120, 120, 120
	ENDIF
	IF TALENT:처녀 > 1
		PRINT [성처녀]
	ELSEIF TALENT:처녀 > 0
		PRINT [처녀]
	ELSEIF TALENT:처녀 == 0 || TALENT:처녀 == -1
		PRINT [非처녀]
	ENDIF
	SETCOLOR 255,255,255
	SIF STAIN:0 & 4 || STAIN:1 & 4 || STAIN:2 & 4
		PRINTFORM [精液まみれ]
	SETCOLOR 255, 180, 120
	SIF TALENT:후타나리 > 0
		PRINT [후타나리]
ENDIF
SETCOLOR 80, 80, 255
SIF CFLAG:1 == 1
	PRINT [変身]
SIF CFLAG:1 == 2
	PRINT [SP変身]

SETCOLOR 255, 128, 255
SIF TCVARn:40 > 0
	PRINT [絶頂禁止]

IF CFLAG:99 < 20
	SETCOLOR 50, 255, 90
ELSEIF CFLAG:99 < 50
	SETCOLOR 40, 146, 73
ELSE
	SETCOLOR 30, 102, 36
ENDIF
SIF CFLAG:99
	PRINTFORM [疲労 {CFLAG:99}]

SETCOLOR 75,150,250
SIF FLAG:70
	PRINTFORM [観衆 {FLAG:70}人]
SETCOLOR 150,75,250
IF GETBATTLESITUATION("常時撮影")
	IF GETBATTLESITUATION("配信")
		PRINTFORM [配信中]
	ELSE
		PRINTFORM [撮影中]
	ENDIF
ENDIF
SIF FLAG:71
	PRINTFORM [動画撮影者 {FLAG:71}人]


SETCOLOR 250,75,15
;襲撃、逃げ遅れ市民
IF GETBATTLESITUATION("撤退不可") == 1 || ((FLAG:70 + FLAG:71) > 0 && CONFIG_CHECK_EVENT_F(3) > 0)
	PRINTFORM [撤退不能]
;악질 시민offかつ通常戦闘の場合
ELSEIF TFLAG:0 < 8 && CONFIG_CHECK_EVENT_F(3) == 0 && PERCENT_CAL_F(BASE:체력, MAXBASE:체력) > 50 && PERCENT_CAL_F(BASE:기력, MAXBASE:기력) > 50 && FLAG:45 == 0
	PRINTFORM [撤退可能まで {8 - TFLAG:0}ターン]
ENDIF

IF TCVARn:12 == 0
	SETCOLOR 150,150,250
	PRINTFORM [正常]
	;生理周期を表示
	CALL PRINT_ESTRUS_CYCLE(TARGET)
ELSE
	SETCOLOR 250,180,50
	SIF (TCVARn:12 & 기절)
		PRINTFORM [기절]
	SETCOLOR 250,0,150
	SIF (TCVARn:12 & 발정)
		PRINTFORM [발정]
	SETCOLOR 250,250,0
	SIF (TCVARn:12 & 마비)
		PRINTFORM [마비]
	SETCOLOR 0,250,150
	SIF (TCVARn:12 & 끈적끈적)
		PRINTFORM [끈적끈적]

	;生理周期を表示
	CALL PRINT_ESTRUS_CYCLE(TARGET)

	SETCOLOR 150,0,250
	SIF (TCVARn:12 & 쓰러짐)
		PRINTFORM [쓰러짐]
	SETCOLOR 255,182,193
	SIF (TCVARn:12 & 황홀)
		PRINTFORM [황홀]
	SETCOLOR 150,0,250
	SIF (TCVARn:12 & 배란)
		PRINTFORM [強制배란]
	SETCOLOR 200,50,50
	SIF (TCVARn:12 & 강구속)
		PRINTFORM [강구속]
ENDIF

IF TALENT:피임결계 > 0 && BASE:성내성 > 0
	SETCOLOR 200,200,80
	PRINTFORM [피임결계]
ENDIF
RESETCOLOR
PRINTL 

PRINT 心境　　　
;CALL SHINKYOU_CHECK, "PRINTSTATE", 0
CALL SHINKYOU_CHECK, "PRINT", 0
PRINTL 

PRINTL


;--------------------------------------------------
;戦闘・敵情報

;촉수
IF ENEMY_TYPE_CHECK_F("AKUOTI") == 0
	CALL TENTACLE_ACCESS, "NAME"
	IF ENEMY_TYPE_CHECK_F("BOSS") == 1
		PRINT (ＢＯＳＳ)
	ELSEIF ENEMY_TYPE_CHECK_F("LASTBOSS") >= 1
		PRINT (ＬＡＳＴ)
	ELSEIF ENEMY_TYPE_CHECK_F("MOB") == 1
		PRINT (ＭＯＢ)
	ENDIF
	CALL TENTACLE_LEVEL
	PRINTFORM  Lv.{RESULT} 
;적 캐릭터
ELSEIF ENEMY_TYPE_CHECK_F("AKUOTI") == 1
	IF CFLAG:(FLAG:111):0 == 상태_세뇌
		PRINTFORM 세뇌された
		PRINTFORM %PRINT_TRANSCALLNAME(FLAG:111)%
		PRINT [
		CALL TENTACLE_ACCESS_PRISON,FLAG:111, "NAME"
		PRINT ]
	ELSEIF CFLAG:(FLAG:111):0 == 상태_흑화
		;흑화変身名が설정されているなら使う
		IF CSTR:(FLAG:111):55 != ""
			PRINTFORM %PRINT_TRANSNAME(FLAG:111)%
		ELSE
			PRINT 흑화した
			PRINTFORM %PRINT_TRANSCALLNAME(FLAG:111)%
		ENDIF
	ENDIF
	PRINTFORM  Lv.{ABL:(FLAG:111):레벨} 
ENDIF

;유폐・세뇌状況
LOCAL = 0
LOCAL:1 = 0
LOCALS'=""
LOCALS:1'=""
;보스 촉수
IF ENEMY_TYPE_CHECK_F("AKUOTI") == 0
	FOR CCOUNT, 1, CHARANUM
		;誰かを세뇌している敵ならその尖兵を表示
		IF CFLAG:CCOUNT:0 == 상태_세뇌 && CFLAG:CCOUNT:21 == FLAG:11
			LOCAL:1 += 1
			LOCALS:1+="["+CALLNAME:CCOUNT+"]"
		;誰かを유폐している敵ならその犠牲者を表示
		ELSEIF CFLAG:CCOUNT:0 == 상태_유폐 && CFLAG:CCOUNT:21 == FLAG:11
			LOCAL += 1
			LOCALS+="["+CALLNAME:CCOUNT+"]"
		ENDIF
	NEXT
;흑화
ELSE
	FOR CCOUNT, 1, CHARANUM
		IF CCOUNT == FLAG:111
			;
		;誰かを세뇌している敵ならその尖兵を表示
		ELSEIF CFLAG:CCOUNT:0 == 상태_세뇌 && CFLAG:CCOUNT:21 == FLAG:111
			LOCAL:1 += 1
			LOCALS:1+="["+CALLNAME:CCOUNT+"]"
		;誰かを유폐している敵ならその犠牲者を表示
		ELSEIF CFLAG:CCOUNT:0 == 상태_유폐 && CFLAG:CCOUNT:21 == FLAG:111
			LOCAL += 1
			LOCALS+="["+CALLNAME:CCOUNT+"]"
		ENDIF
	NEXT
ENDIF
SIF LOCAL
	PRINTFORM 　유폐中：%LOCALS%
SIF LOCAL:1
	PRINTFORM 　세뇌中：%LOCALS:1%
;SIF LOCAL || LOCAL:1
;	PRINTL 
PRINTL 


;戦闘距離
CALL SHOW_DISTANCE_WINDOW()

CALL SHOW_TRAIN_PALAM_STATUS("하단부")

;空白行
;PRINTL 


;通常の雑魚戦(制限15ターン)
;通常の보스전 (制限50ターン)
;襲来イベント(15ターン耐久で勝利)
IF 턴상한 > 0
	PRINT 残り時間
	PRINTFORM %UNICODE(0x208D)%
	IF GETBATTLESITUATION("追撃戦") || GETBATTLESITUATION("脱出戦")
		CALLFORM COLOR_BAR(턴상한-TFLAG:0, 턴상한, 20,210,40,70,-160,18,6,10,2,UNICODE(0x25AE),UNICODE(0x25AE))
	ELSE
		CALLFORM COLOR_BAR(턴상한-TFLAG:0, 턴상한, 20,70,210,40,-160,10,18,6,2,UNICODE(0x25AE),UNICODE(0x25AE))
	ENDIF
	PRINTFORM %UNICODE(0x208E)%
	PRINTFORM （{턴상한-TFLAG:0, 5}/{턴상한,5}）
	PRINTL 
;時間無制限の場合
ELSE
	PRINT 残り時間
	PRINTFORM %UNICODE(0x208D)%
	CALLFORM COLOR_BAR(0, 1, 20,40,40,40,-160,0,0,0,2,UNICODE(0x25AE),UNICODE(0x25AE))
	PRINTFORM %UNICODE(0x208E)%
	PRINTFORM （-----/-----）
	PRINTL
ENDIF



;체력
CALL COLORSENTENCE_ENEMYBAR,"적 체력", FLAG:13, FLAG:12, 20
;油断
IF TFLAG:2 >= 1
	PRINT 　<<油断中>> 
ELSEIF FLAG:20 >= 100 || ENEMY_TYPE_CHECK_F("AKUOTI") == 1
	PRINTFORM 　(방심도：{FLAG:17 * 100 / FLAG:16}％) 
ELSEIF TFLAG:24 > 0
	PRINTFORM 先制공격可能！(残り{TFLAG:24}ターン)
ENDIF
PRINTL 
	
;사정 게이지
IF ENEMY_TYPE_CHECK_F("AKUOTI") == 0 && FLAG:11 == 901
	PRINTFORM 적 절정
	CALL COLORSENTENCE_ENEMYBAR,"적 절정", FLAG:15, FLAG:14, 20
ELSEIF FLAG:73 > 0
	PRINTFORM 적 사정
	CALL COLORSENTENCE_ENEMYBAR,"적 사정", FLAG:15, FLAG:14, 20
ELSEIF ENEMY_TYPE_CHECK_F("AKUOTI") == 0
	PRINTFORM %STR:2500%사정
	CALL COLORSENTENCE_ENEMYBAR,"적 사정", FLAG:15, FLAG:14, 20
ELSEIF ENEMY_TYPE_CHECK_F("AKUOTI") == 1 && (ISPENIS(FLAG:111) || TALENT:(FLAG:111):기생 > 0)
	PRINTFORM 적 사정
	CALL COLORSENTENCE_ENEMYBAR,"적 사정", FLAG:15, FLAG:14, 20
ELSE
	PRINTFORM 적 절정
	CALL COLORSENTENCE_ENEMYBAR,"적 절정", FLAG:15, FLAG:14, 20
ENDIF
PRINTL 
;デバッグモードか解析度７５％以上か相手が세뇌/흑화 캐릭터라면 스테이터스 표시
IF FLAG:999 == 1 || FLAG:20 >= 75 || ENEMY_TYPE_CHECK_F("AKUOTI") > 0
	IF ENEMY_TYPE_CHECK_F("AKUOTI") == 0
		CALL TENTACLE_ACCESS, "KOUGEKI"
		SIF RESULT < 0
			RESULT = 0
		PRINTFORM 攻：{RESULT,3,RIGHT} 
		CALL TENTACLE_ACCESS, "BOUGYO"
		SIF RESULT < 0
			RESULT = 0
		PRINTFORM 防：{RESULT,3,RIGHT} 
		CALL TENTACLE_ACCESS, "BINSYOU"
		SIF RESULT < 0
			RESULT = 0
		PRINTFORM 敏：{RESULT,3,RIGHT} 
		CALL TENTACLE_ACCESS, "CHISEI"
		SIF RESULT < 0
			RESULT = 0
		PRINTFORM 知：{RESULT,3,RIGHT} 
		PRINTL 
		IF FLAG:20 >= 100
			CALL TENTACLE_ACCESS, "SHORT"
			PRINTFORM 近：{RESULT,3,RIGHT} 
			CALL TENTACLE_ACCESS, "MIDDLE"
			PRINTFORM 中：{RESULT,3,RIGHT} 
			CALL TENTACLE_ACCESS, "LONG"
			PRINTFORM 遠：{RESULT,3,RIGHT} 
			CALL TENTACLE_ACCESS, "HOLD"
			PRINTFORM 捕：{RESULT} 
			PRINTL 
		ELSE
			PRINTFORML 解析度：{FLAG:20}％
		ENDIF
	ELSEIF ENEMY_TYPE_CHECK_F("AKUOTI") == 1
		PRINTFORM 攻：{MAXBASE:(FLAG:111):공격,3,RIGHT} 
		PRINTFORM 防：{MAXBASE:(FLAG:111):방어,3,RIGHT} 
		PRINTFORM 敏：{MAXBASE:(FLAG:111):민첩,3,RIGHT} 
		PRINTFORM 知：{MAXBASE:(FLAG:111):지성,3,RIGHT} 
		PRINTL 
		PRINTFORM 近：{ABL:(FLAG:111):근거리,3,RIGHT} 
		PRINTFORM 中：{ABL:(FLAG:111):중거리,3,RIGHT} 
		PRINTFORM 遠：{ABL:(FLAG:111):원거리,3,RIGHT} 
		PRINTL 
	ENDIF
ELSE
	PRINTFORML 解析度：{FLAG:20}％
ENDIF



SIF CONFIG_CHECK_SCREEN_F(2) > 0
	RETURN 0

DRAWLINE
IF TCVARn:0 == 0
	IF (TCVARn:12 & 강구속)
		SETCOLOR 200,50,50
		PRINT   <<강구속>>
	ELSE
		SETCOLOR 255, 146, 238
		PRINT   <<拘束中>>
	ENDIF
	RESETCOLOR
	PRINTL 
ENDIF

;--------------------------------------------------
;パラメータ表示
@SHOW_STATUS_PALAM
#DIM CAL_VAR, 2

;拡張度の表示
IF CFLAG:34 > 0 && CONFIG_CHECK_MANIAC_F(16) == 1
	CALL PRINTFORM_GAPING_NOW,TARGET, CFLAG:1
ELSE
	PRINTL 
ENDIF

REPEAT 12
	LOCAL = COUNT
	SIF COUNT > 3
		LOCAL += 6

	IF COUNT < 감각수
		IF BASE:(COUNT + 30) > 0
			CALL PERCENT_CAL, BASE:(COUNT + 30), MAXBASE:(COUNT + 30)
			CAL_VAR:0 = LIMIT(255 - RESULT * RESULT * 4 / 200, 0, 255)
			CAL_VAR:1 = LIMIT(-215 - RESULT * RESULT / 100 + RESULT * 5, 0, 255)
			PRINTFORM %TALENTNAME:(COUNT + 190)%　%UNICODE(0x208D)%
			CALL COLOR_BAR(BASE:(COUNT + 30),MAXBASE:(COUNT + 30),13,CAL_VAR:0,CAL_VAR:1,20,-160,6,32,20,1,UNICODE(0x25AE),UNICODE(0x25AE))
			PRINTFORM %UNICODE(0x208E)% 
		ELSE
			PRINTFORM %PALAMNAME:LOCAL%
			PRINTFORM {PALAM:LOCAL,8}
		ENDIF
	ELSE
		PRINTFORM %PALAMNAME:LOCAL%
		PRINTFORM {PALAM:LOCAL,8}
	ENDIF

	IF COUNT >= 감각수 || BASE:(COUNT + 30) <= 0
		;パラメータ取得레벨の表示
		IF PALAM:LOCAL < 100
			PRINT   -  [Lv.0] 
		ELSEIF PALAM:LOCAL < 300
			PRINT   -  [Lv.1] 
		ELSEIF PALAM:LOCAL < 600
			PRINT   -  [Lv.2] 
		ELSEIF PALAM:LOCAL < 1500
			PRINT   -  [Lv.3] 
		ELSEIF PALAM:LOCAL < 3000
			PRINT   -  [Lv.4] 
		ELSEIF PALAM:LOCAL < 6000
			PRINT   -  [Lv.5] 
		ELSEIF PALAM:LOCAL < 10000
			PRINT   -  [Lv.6] 
		ELSEIF PALAM:LOCAL < 30000
			PRINT   -  [Lv.7] 
		ELSEIF PALAM:LOCAL < 60000
			PRINT   -  [Lv.8] 
		ELSEIF PALAM:LOCAL < 150000
			PRINT   -  [Lv.9] 
		ELSEIF PALAM:LOCAL < 300000
			PRINT   - [Lv.10] 
		ELSE
			PRINT   - [LvMAX] 
		ENDIF
	ENDIF
	
	SIF COUNT == 2 || COUNT == 5 || COUNT == 8
		PRINTL 
REND
PRINTL 




;------------------------------------------------------------------------------------
;距離表示
@PRINT_DISTANCE
VARSET LOCALS
PRINT [
IF TCVARn:0 == 0
	IF TCVARn:12 & 강구속
		SETCOLOR 200,50,50
		LOCALS = 강구속
	ELSE
		SETCOLOR 255, 146, 238
		LOCALS = 拘束中
	ENDIF
ELSE
	IF TCVARn:0 == 1
		SETCOLOR 255,0,0
		LOCALS = 近
	ELSEIF TCVARn:0 == 2
		SETCOLOR 255,255,0
		LOCALS = 中
	ELSEIF TCVARn:0 == 3
		SETCOLOR 64,255,64
		LOCALS = 遠
	ENDIF
	IF GETBIT(TCVARn:216, 1)
		LOCALS:1 = 空中
	ELSEIF GETBIT(TCVARn:216, 2)
		LOCALS:1 = 着地
	ELSE
		LOCALS:1 = 距離
	ENDIF
ENDIF
PRINTFORM %LOCALS%
IF GETBIT(TCVARn:216, 1)
	SETCOLOR 0,60,255
ELSEIF GETBIT(TCVARn:216, 2)
	SETCOLOR 255,128,0
ENDIF
PRINTFORM %LOCALS:1%
RESETCOLOR
PRINT ]

;전투 지원による지성補正率計算
;ARG　支援補正の基礎値パターン
@CALC_CHISEI_SHIEN(ARG)
#DIM CHISEI_CAL
#DIM CCOUNT

LOCAL = 0
FOR CCOUNT, 0, CHARANUM
	SIF CCOUNT == MASTER || CCOUNT > 6
		CONTINUE
	CALL CHECK_ACTION(예정_지원,CCOUNT)
	SIF RESULT > 0
		CONTINUE
	IF CFLAG:CCOUNT:100 == 예정_지원
		IF ARG == 0
			CHISEI_CAL = MAXBASE:CCOUNT:지성 / 4
		ELSEIF ARG == 1
			CHISEI_CAL = MAXBASE:CCOUNT:지성 / 8
		ELSEIF ARG == 2
			CHISEI_CAL = MAX((BASE:CCOUNT:지성 - 100),2) / 2
		ENDIF
		;의상에 따른 보정
		CALL CLOTH_BATTLE_HOSEI, "CHISEI", CCOUNT
		CHISEI_CAL = CHISEI_CAL * RESULT / 100
		;支援者が업무용 이어폰装備
		SIF CFLAG:CCOUNT:43 == 511
			CHISEI_CAL = CHISEI_CAL * 110 / 100 + 5
		;支援者が헌신적
		SIF TALENT:CCOUNT:헌신적 > 0
			CHISEI_CAL = CHISEI_CAL * 110 / 100 + 5
		;支援者が사지결손
		SIF TALENT:CCOUNT:사지결손 > 0
			CHISEI_CAL = CHISEI_CAL * 150 / 100 + 5;大量ボーナス(極端だがゲームバランス面の措置だと思われる)
			
		;対象者が제멋대로굼
		SIF TALENT:TARGET:제멋대로굼 > 0
			CHISEI_CAL = CHISEI_CAL * 25 / 100
		LOCAL += CHISEI_CAL
	ENDIF
NEXT
RETURN LOCAL




@SHOW_DISTANCE_WINDOW()
IF TCVARn:0 == 0
	LOCAL = 0
ELSEIF TCVARn:0 == 1
	LOCAL = 3
ELSEIF TCVARn:0 == 2
	LOCAL = 9
ELSEIF TCVARn:0 == 3
	LOCAL = 21
ENDIF
;ランダムで微妙に位置が変動する…という処理だがEx攻防やエアスト切り替えた際に変動する事があるので見た目的に微妙だった
;ターン内で固定になるように(日付＋ターン数)の剰余とかにしておく
;IF TCVARn:0 != 0 && RAND:2 == 0
;	LOCAL -= RAND:2
;	LOCAL += RAND:2
;ENDIF
LOCAL:1=0
IF TCVARn:0 != 0 && (DAY+TFLAG:0) % 4 == 0
	LOCAL -= 1
	LOCAL:1 -= 1
ELSEIF TCVARn:0 != 0 && (DAY+TFLAG:0) % 4 == 1
	LOCAL += 1
	LOCAL:1 += 1
ENDIF

IF TCVARn:0 == 0
	SETCOLORBYNAME HOTPINK
ENDIF
PRINTL ┏━━━━━━━━━━━━━━━━━━━━┓



;공중전특기以外ならエアでも２行上には行かない
IF !TALENT:TARGET:공중전특기
	PRINT ┃　　　　　　　　　　　　　　　　　　　　┃
	PRINTL 【危険予測】
	PRINT ┃
ELSE
	PRINT ┃
ENDIF

REPEAT LOCAL+7
	PRINT  
REND
IF GETBIT(TCVARn:216, 1)
	IF ISFEMALE()
		SETCOLORBYNAME HOTPINK
		PRINT ♀
		RESETCOLOR
	ELSE
		SETCOLORBYNAME BLUE
		PRINT ♂
		RESETCOLOR
	ENDIF
ELSE
	PRINT 　
ENDIF
REPEAT 31 -LOCAL
	PRINT  
REND
IF TCVARn:0 == 0
	SETCOLORBYNAME HOTPINK
ENDIF
PRINT ┃

;공중전특기ならエアで表示されるのは２行上
IF TALENT:TARGET:공중전특기
	PRINT 【危険予測】
	PRINTL
	PRINT ┃　　　　　　　　　　　　　　　　　　　　┃
ELSE
	PRINT
ENDIF

;空中が狙われる確率
RESETCOLOR
PRINT  空:
CALL FORECAST_OUTPUT_NUM, (TCVARn:0 == 0 ? 0 # TCVARn:33)
PRINT  %
PRINTL

IF TCVARn:0 == 0
	SETCOLORBYNAME HOTPINK
ENDIF

IF TCVARn:0 > 0
	PRINT ┃ 
	SETCOLORBYNAME HOTPINK
	PRINT ≪
	IF ENEMY_TYPE_CHECK_F("AKUOTI") == 0
		CALL TENTACLE_ACCESS, "GETNAME"
		LOCALS=%RESULTS%
	;적 캐릭터
	ELSEIF ENEMY_TYPE_CHECK_F("AKUOTI") == 1
		LOCALS=%PRINT_TRANSCALLNAME(FLAG:111)%
	ENDIF
	PRINTFORM %SUBSTRING(LOCALS,0,1)%
	PRINT ≫


	RESETCOLOR
ELSE
	PRINT ┃ 
	SETCOLORBYNAME ORANGE
	PRINT ≪
	IF ENEMY_TYPE_CHECK_F("AKUOTI") == 0
		CALL TENTACLE_ACCESS, "GETNAME"
		LOCALS=%RESULTS%
	;적 캐릭터
	ELSEIF ENEMY_TYPE_CHECK_F("AKUOTI") == 1
		LOCALS=%PRINT_TRANSCALLNAME(FLAG:111)%
	ENDIF
	PRINTFORM %SUBSTRING(LOCALS,0,1)%

	RESETCOLOR
	IF ISFEMALE()
		SETCOLORBYNAME HOTPINK
		PRINT ♀
		RESETCOLOR
	ELSE
		SETCOLORBYNAME BLUE
		PRINT ♂
		RESETCOLOR
	ENDIF
	SETCOLORBYNAME ORANGE
	PRINT ≫
	RESETCOLOR
ENDIF

REPEAT LOCAL
	IF COUNT % 2 == 0
		PRINT _
	ELSE
		PRINT -
	ENDIF
REND
SETCOLORBYNAME HOTPINK
IF TCVARn:0 == 0
	RESETCOLOR
ELSEIF !GETBIT(TCVARn:216, 1) && TCVARn:0 > 0
	IF ISFEMALE()
		SETCOLORBYNAME HOTPINK
		PRINT ♀
		RESETCOLOR
	ELSE
		SETCOLORBYNAME BLUE
		PRINT ♂
		RESETCOLOR
	ENDIF
ELSE
	IF LOCAL % 2 == 1
		PRINT -_
	ELSE
		PRINT _-
	ENDIF
ENDIF
RESETCOLOR
REPEAT 22-LOCAL
	IF COUNT % 2 == 1
		PRINT _
	ELSE
		PRINT -
	ENDIF
REND

PRINT  
CALL PRINT_DISTANCE

IF TCVARn:0 == 0
	SETCOLORBYNAME HOTPINK
ENDIF

PRINT ┃
;地上が狙われる確率
PRINTPLAIN  
CALL PRINT_FORECAST
PRINTL

IF TCVARn:0 == 0
	SETCOLORBYNAME HOTPINK
ENDIF

PRINTL ┗━━━━━━━━━━━━━━━━━━━━┛
RESETCOLOR