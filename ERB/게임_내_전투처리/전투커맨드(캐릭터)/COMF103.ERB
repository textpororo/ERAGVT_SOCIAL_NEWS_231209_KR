;스마타애태우기
@COM103

;距離表示
CALL PRINT_DISTANCE
PRINTL 

;油断度 상승
TFLAG:3 += 25 + 5 * ABL:기교

;快C
IF ABL:C감각 == 0
	COMMON_PALAM:0 = 250
ELSEIF ABL:C감각 == 1
	COMMON_PALAM:0 = 500
ELSEIF ABL:C감각 == 2
	COMMON_PALAM:0 = 1000
ELSEIF ABL:C감각 == 3
	COMMON_PALAM:0 = 2000
ELSEIF ABL:C감각 == 4
	COMMON_PALAM:0 = 3000
ELSEIF ABL:C감각 >= 5
	COMMON_PALAM:0 = 4000
ENDIF

;快V
IF ABL:V감각 == 0
	COMMON_PALAM:1 = 125
ELSEIF ABL:V감각 == 1
	COMMON_PALAM:1 = 250
ELSEIF ABL:V감각 == 2
	COMMON_PALAM:1 = 500
ELSEIF ABL:V감각 == 3
	COMMON_PALAM:1 = 1000
ELSEIF ABL:V감각 == 4
	COMMON_PALAM:1 = 1500
ELSEIF ABL:V감각 >= 5
	COMMON_PALAM:1 = 2000
ENDIF

;成功率設定
LOCAL = 35 + ABL:기교 * 5
;매료경험依存
IF EXP:매료경험 >= 200
	LOCAL += 20
ELSEIF EXP:매료경험 >= 100
	LOCAL += 10 + (EXP:매료경험 - 100) / 10
ELSEIF EXP:매료경험 >= 50
	LOCAL += (EXP:매료경험 - 50) / 5
ENDIF

;暴走촉수 슈트を装備している場合、成功率ダウン
IF CFLAG:(CFLAG:1==0 ? 40 # 41) == 199 && TCVARn:41 != 0
	LOCAL -= 20
;촉수 구속구を装備している場合、成功率ダウン
ELSEIF CFLAG:42 == 400
	LOCAL -= 10
ENDIF
;성처녀は確定失敗
SIF CHECK_HOLYVIRGIN_F()==1
	LOCAL = 0
SETCOLOR 105,105,105
SIF FLAG:999
	PRINTFORML 스마타애태우기成功率 = {LOCAL}％
RESETCOLOR
;判定に成功した場合
IF RAND:100 < LOCAL || CLOTH_OUTER_PER > 90 || CLOTH_INNER_PER >= CLOTH_INNER_DEF
	;服へのダメージ
	CALL CLOTH_BATTLE_DAMAGE, 12

	;지문: 스마타애태우기
	CALL MESSAGE_BATTLE_CHARA_SEX_ATTACK103
	;지문: 세뇌/흑화 캐릭터가 操作キャラの스마타애태우기を見た
	SIF ENEMY_TYPE_CHECK_F("AKUOTI") == 1
		CALL MESSAGE_OTHER_BATTLE_CHARA_SEX_ATTACK103

	;사정 게이지を記録
	LOCAL:1 = FLAG:15

	;사정
	LOCAL = MIN(MAXBASE:성내성 / 4, 75) + 50 + 25 * ABL:기교
	CALL TENTACLE_SYASEI_UP, LOCAL

	PRINTL
	IF (FLAG:110 == 0)
		CALL TENTACLE_ACCESS, "NAME"
	ELSEIF (FLAG:110 == 1)
		PRINTFORM %PRINT_TRANSCALLNAME(FLAG:111)%
	ENDIF
	PRINT に
	FONTBOLD
	PRINTFORM {FLAG:15 - LOCAL:1}の快楽
	FONTREGULAR
	PRINTW を与えた！
	PRINT 次のターン相手は
	FONTBOLD
	PRINT 挿入系コマンド
	FONTREGULAR
	PRINTL を選択しやすくなった！
	PRINTW 

	;촉수の사정チェック
	CALL TENTACLE_SYASEI_CHECK
	PRINTL 

	;습득の獲得
	COMMON_PALAM:6 += 250 + 25 * (ABL:순종 + ABL:봉사정신 * 2)

	;촉수を行動不能にする
	TFLAG:1 = 1

	;행동포인트を+1
	EX:행동포인트 += 1

	RETURN 1
;判定に失敗した場合
ELSE
	PRINTFORML %PRINT_TRANSCALLNAME(TARGET)%은(는)스마타애태우기の構え！
	PRINTW 
	IF BASE:V결계내구력 > 0
		PRINTFORML しかし%PRINT_TRANSCALLNAME(TARGET)%의 行動は失敗した！
		PRINTFORML 無防備な体勢で촉수に抑え込まれ、촉수の攻勢に晒されるV결계が
		PRINTFORML たちまち輝きを失っていく…
		COMMON_PALAM:1 *= 4
	ELSEIF TALENT:처녀 > 0
		PRINTFORML 挑発するように素股していた%PRINT_TRANSCALLNAME(TARGET)%だったが
		IF (CFLAG:(CFLAG:1==0 ? 40 # 41) == 199 && TCVARn:41 != 0) || CFLAG:42 == 400
			IF CFLAG:(CFLAG:1==0 ? 40 # 41) == 199 && TCVARn:41 != 0
				PRINTFORM 暴走した%ITEMNAME:199%
			ELSEIF CFLAG:42 == 400
				PRINTFORM %ITEMNAME:400%
			ENDIF
			PRINTFORML の촉수に強制開脚させられてしまう。
			PRINTL 
			IF RAND:3 == 0
				PRINTFORML 拘束されて雌穴をくぱぁと広げられ、
			ELSEIF RAND:2 == 0
				PRINTFORML 種付けを받아들인다屈辱的な体勢を無理やり取らされ、
			ELSE
				PRINTFORML 思わぬタイミングで体勢を崩され、
			ENDIF
			PRINTFORML なし崩し的にズブリと男根の侵入を許してしまった！
		ELSE
			PRINTFORML まだ性交したことのないヴァギナに亀頭の先端がぐちゅっと挿入り込み、
			PRINTFORML 未知の감각に思わず「んッ・・・❤」と色付いた吐息を漏らしてしまう。
			PRINTL 
			PRINTFORML その拍子に%PRINT_TRANSCALLNAME(TARGET)%은(는)膣圧の加減を間違えてしまい、
			PRINTFORML なし崩し的にズブリと男根の侵入を許してしまった！
		ENDIF
		PRINTW 
		PRINTFORML 처녀 상실
		PRINTL 
		PRINTFORML 不意に訪れた破瓜の痛みに驚き慌てて引き抜こうとするも時既に遅く、
		PRINTFORML %PRINT_TRANSCALLNAME(TARGET)%은(는)そのまま強制交尾の体勢に持ち込まれてしまった・・・
		PRINTW 
		;고통が大量に入る
		COMMON_PALAM:10 = 10000
		TALENT:처녀 = -1
		CFLAG:206 = 2
	ELSEIF (CFLAG:(CFLAG:1==0 ? 40 # 41) == 199 && TCVARn:41 != 0) || CFLAG:42 == 400
		PRINTFORML しかし%PRINT_TRANSCALLNAME(TARGET)%의 行動は失敗した！
		IF CFLAG:(CFLAG:1==0 ? 40 # 41) == 199 && TCVARn:41 != 0
			PRINTFORM 暴走した%ITEMNAME:199%
		ELSEIF CFLAG:42 == 400
			PRINTFORM %ITEMNAME:400%
		ENDIF
		PRINT の촉수に
		IF RAND:3 == 0
			PRINTFORML 拘束されて雌穴をくぱぁと広げられ、
		ELSEIF RAND:2 == 0
			PRINTFORML 種付けを받아들인다屈辱的な体勢を無理やり取らされ、
		ELSE
			PRINTFORML 思わぬタイミングで体勢を崩され、
		ENDIF
		PRINTFORML なし崩し的に挿入を許してしまう・・・
	ELSEIF (MESSAGE_BRANCH_F(TARGET) & 고전)
		PRINTFORML しかし%PRINT_TRANSCALLNAME(TARGET)%의 行動は失敗した！
		PRINTFORML 先走り汁に光る先端を淫裂に押し当てられたところで腰を浮かそうとするが、
		PRINTFORML 力で抑え込まれそのまま挿入されてしまう・・・
	ELSE
		PRINTFORML しかし%PRINT_TRANSCALLNAME(TARGET)%의 行動は失敗した！
		PRINTFORML 素股だけのつもりが、先端が少しだけ挿入ったタイミングでズンと突き上げられ、
		PRINTFORML そのまま雪崩れ込むように膣穴を犯されてしまう・・・
	ENDIF

	;습득の獲得
	COMMON_PALAM:6 += 50 + 25 * (ABL:순종 + ABL:봉사정신 * 2)

	;행동포인트を+1
	EX:행동포인트 += 1

	IF ENEMY_TYPE_CHECK_F("MOB") == 1
		TRYCALLFORM TENTACLE_MOB_{FLAG:11}_REACTION_REF, 2 - (BASE:V결계내구력 > 0)
	ELSEIF ENEMY_TYPE_CHECK_F("LASTBOSS") >= 1
		TRYCALLFORM TENTACLE_LASTBOSS_{FLAG:11}_REACTION_REF, 2 - (BASE:V결계내구력 > 0)
	ELSE
		TRYCALLFORM TENTACLE_BOSS_{FLAG:11}_REACTION_REF, 2 - (BASE:V결계내구력 > 0)
	ENDIF
	SIF RESULT >= 0
		TFLAG:17 = RESULT

	RETURN 1
ENDIF

