
;♂→♀변신시ＴＳ캐릭터가 여체화하면 남자로 돌아올 수 없게 된다
;--------------------------------------------------------------------------------------------------------------------------------------------------------------
@TS_MtoF, ARG
#DIM KEEP
#DIM TRANS
#DIM AIRPLUS
KEEP = TARGET
TARGET = ARG
IF CFLAG:1 > 0
	TRANS = 1
ELSE
	TRANS = 0
ENDIF

;변신하지 않았다면 강제 변신시킨다
SIF CFLAG:1 < 1
	CALL TRANSFORM, 1
;소질 변동을 삭제하여 변신을 해제한다
TALENT:변신시체격변동 = 0
TALENT:변신시가슴사이즈변동 = 0
BASE:나이 = MAXBASE:나이

;변신 전의 공중 성능 강화
CALL CLOTH_BATTLE_HOSEI, "AIRPLUS",TARGET
AIRPLUS = RESULT

;공중 성능 강화의 변동
CALL CLOTH_BATTLE_HOSEI, "AIRPLUS",TARGET
IF AIRPLUS == 0 && RESULT > 0
	MAXBASE:공중대시 += 1
	BASE:공중대시 = MAXBASE:공중대시
	SIF BASE:공중대시 >= 5
		BASE:공중대시 = 5
ELSEIF AIRPLUS == 1 && RESULT == 0
	MAXBASE:공중대시 -= 1
	BASE:공중대시 = MAXBASE:공중대시
	SIF BASE:공중대시 < 0
		BASE:공중대시 = 0
ENDIF

;변신만 해제 처리
CFLAG:1 = 0

TALENT:성별변화 = 1
TALENT:남자 = 0
TALENT:오토코노코 = 0
SIF TALENT:변신시비처녀 == 0
	TALENT:처녀 = 1
TALENT:변신시ＴＳ = -1
TALENT:변신시비처녀 = 0
TALENT:외관 = TALENT:변신시외관
TALENT:후타나리 = TALENT:변신시후타나리
IF TALENT:변신시젖기쉬움변동 > 0
	TALENT:젖기쉬움 = 1
ELSEIF TALENT:변신시젖기쉬움변동 < 0
	TALENT:젖기어려움 = 1
ENDIF
IF TALENT:변신시Ｖ감각변동 > 0
	TALENT:Ｖ민감 = 1
ELSEIF TALENT:변신시Ｖ감각변동 < 0
	TALENT:Ｖ둔감 = 1
ENDIF
TALENT:변신시젖기쉬움변동 = 0
TALENT:변신시Ｖ감각변동 = 0

IF CFLAG:34 > 0
	CALL GENERATE_CHAR_SIZE, TARGET, 0
	BASE:신장 = RESULT:2
	BASE:체중 = RESULT:3
	BASE:가슴둘레 = RESULT:4
	BASE:허리둘레 = RESULT:5
	BASE:골반둘레 = RESULT:6
	BASE:가슴무게 = RESULT:7
ENDIF
PRINTL 

;머리, 눈, 피부색을 덮어쓴다
IF CSTR:ARG:13 != CSTR:ARG:14
	PRINTL 【평상시】　헤어 스타일　을 선택해 주십시오.
	PRINT [0] 변신 후 헤어 스타일 [
	PRINTS CSTR:ARG:14
	PRINTL ] 을 인계한다
	PRINT [1] 평상시 헤어 스타일 [
	PRINTS CSTR:ARG:13
	PRINTL ] 을 인계한다
	$INPUT_LOOP_0
	INPUT
	IF RESULT == 0
		CSTR:13 = %CSTR:14%
	ELSEIF RESULT != 1
		GOTO INPUT_LOOP_0
	ENDIF
	PRINTL 
ENDIF
IF CSTR:ARG:30 != CSTR:ARG:31
	PRINTL 【평상시】　머리색　을 선택해 주십시오.
	PRINT [0] 변신 후의 색 [
	CALL SETCOLOR_BY_STR, CSTR:ARG:31
	PRINT ■
	RESETCOLOR
	PRINTL ] 을 인계한다
	PRINT [1] 평상시의 색 [
	CALL SETCOLOR_BY_STR, CSTR:ARG:30
	PRINT ■
	RESETCOLOR
	PRINTL ] 을 인계한다
	$INPUT_LOOP_1
	INPUT
	IF RESULT == 0
		CSTR:30 = %CSTR:31%
	ELSEIF RESULT != 1
		GOTO INPUT_LOOP_1
	ENDIF
	PRINTL 
ENDIF
IF (CSTR:ARG:32 != CSTR:ARG:34) || (CSTR:ARG:33 != CSTR:ARG:35)
	PRINTL 【평상시】　눈동자 색　을 선택해 주십시오.
	PRINT [0] 변신 후의 색 [
	CALL SETCOLOR_BY_STR, CSTR:ARG:34
	PRINT ■
	RESETCOLOR
	PRINT ][
	CALL SETCOLOR_BY_STR, CSTR:ARG:35
	PRINT ■
	RESETCOLOR
	PRINTL ] 을 인계한다
	PRINT [1] 평상시의 색 [
	CALL SETCOLOR_BY_STR, CSTR:ARG:32
	PRINT ■
	RESETCOLOR
	PRINT ][
	CALL SETCOLOR_BY_STR, CSTR:ARG:33
	PRINT ■
	RESETCOLOR
	PRINTL ] 을 인계한다
	$INPUT_LOOP_2
	INPUT
	IF RESULT == 0
		CSTR:32 = %CSTR:34%
		CSTR:33 = %CSTR:35%
	ELSEIF RESULT != 1
		GOTO INPUT_LOOP_2
	ENDIF
	PRINTL 
ENDIF
IF CSTR:ARG:36 != CSTR:ARG:37
	PRINTL 【평상시】　피부색　을 선택해 주십시오.
	PRINT [0] 변신 후의 색 [
	CALL SETCOLOR_BY_STR, CSTR:ARG:37
	PRINT ■
	RESETCOLOR
	PRINTL ] 을 인계한다
	PRINT [1] 평상시의 색 [
	CALL SETCOLOR_BY_STR, CSTR:ARG:36
	PRINT ■
	RESETCOLOR
	PRINTL ] 을 인계한다
	$INPUT_LOOP_3
	INPUT
	IF RESULT == 0
		CSTR:36 = %CSTR:37%
	ELSEIF RESULT != 1
		GOTO INPUT_LOOP_3
	ENDIF
	PRINTL 
ENDIF

SIF TRANS > 0
	CALL TRANSFORM, 1

TARGET = KEEP
RETURN 1



;♀→♂변신시ＴＳ 캐릭터가 여체화하면 남자로 변신할 수 없게 된다
;--------------------------------------------------------------------------------------------------------------------------------------------------------------
@TS_FtoM, ARG
#DIM KEEP
#DIM TRANS
KEEP = TARGET
TARGET = ARG
IF CFLAG:1 > 0
	TRANS = 1
ELSE
	TRANS = 0
ENDIF

;변신하지 않았다면 강제 변신시킨다
SIF CFLAG:1 < 1
	CALL TRANSFORM, 1

TALENT:성별변화 = 10
TALENT:남자 = 0
TALENT:오토코노코 = 0
TALENT:변신시ＴＳ = -1
SIF TALENT:처녀 < -2
	TALENT:처녀 += 5
MAXBASE:나이 = BASE:나이

;가슴 사이즈, 체격을 평상시에 맞춘다
IF CHARATALENT_F(TARGET,0,"절벽") > 0
	TALENT:빈유 = 2
	TALENT:거유 = 0
ELSEIF CHARATALENT_F(TARGET,0,"빈유") > 0
	TALENT:빈유 = 1
	TALENT:거유 = 0
ELSEIF CHARATALENT_F(TARGET,0,"기유") > 0
	TALENT:빈유 = 0
	TALENT:거유 = 5
ELSEIF CHARATALENT_F(TARGET,0,"마유") > 0
	TALENT:빈유 = 0
	TALENT:거유 = 4
ELSEIF CHARATALENT_F(TARGET,0,"초유") > 0
	TALENT:빈유 = 0
	TALENT:거유 = 3
ELSEIF CHARATALENT_F(TARGET,0,"폭유") > 0
	TALENT:빈유 = 0
	TALENT:거유 = 2
ELSEIF CHARATALENT_F(TARGET,0,"거유") > 0
	TALENT:빈유 = 0
	TALENT:거유 = 1
ENDIF
IF CHARATALENT_F(TARGET,0,"왜소함") > 0
	TALENT:왜소함 = 1
	TALENT:장신 = 0
ELSEIF CHARATALENT_F(TARGET,0,"장신") > 0
	TALENT:왜소함 = 0
	TALENT:장신 = 1
ENDIF
TALENT:변신시체격변동 = 0
TALENT:변신시가슴사이즈변동 = 0
TALENT:변신시외관 = TALENT:외관
TALENT:변신시후타나리 = TALENT:후타나리

;변신만 해제 처리
CFLAG:1 = 0

IF CFLAG:34 > 0
	CALL GENERATE_CHAR_SIZE, TARGET, 1
	MAXBASE:신장 = RESULT:2
	MAXBASE:체중 = RESULT:3
	MAXBASE:가슴둘레 = RESULT:4
	MAXBASE:허리둘레 = RESULT:5
	MAXBASE:골반둘레 = RESULT:6
	MAXBASE:가슴무게 = RESULT:7
ENDIF
PRINTL 

;머리, 눈, 피부색을 덮어쓴다
IF CSTR:ARG:13 != CSTR:ARG:14
	PRINTL 【평상시】　헤어 스타일　을 선택해 주십시오.
	PRINT [0] 변신 후 헤어 스타일 [
	PRINTS CSTR:ARG:14
	PRINTL ] 을 인계한다
	PRINT [1] 평상시 헤어 스타일 [
	PRINTS CSTR:ARG:13
	PRINTL ] 을 인계한다
	$INPUT_LOOP_0
	INPUT
	IF RESULT == 0
		CSTR:13 = %CSTR:14%
	ELSEIF RESULT != 1
		GOTO INPUT_LOOP_0
	ENDIF
	PRINTL 
ENDIF
IF CSTR:ARG:31 != CSTR:ARG:30
	PRINTL 【변신 후】　머리색　을 선택해 주십시오.
	PRINT [0] 변신 후의 색 [
	CALL SETCOLOR_BY_STR, CSTR:ARG:31
	PRINT ■
	RESETCOLOR
	PRINTL ] 을 인계한다
	PRINT [1] 평상시의 색 [
	CALL SETCOLOR_BY_STR, CSTR:ARG:30
	PRINT ■
	RESETCOLOR
	PRINTL ] 을 인계한다
	$INPUT_LOOP_1
	INPUT
	IF RESULT == 1
		CSTR:31 = %CSTR:30%
	ELSEIF RESULT != 0
		GOTO INPUT_LOOP_1
	ENDIF
	PRINTL 
ENDIF
IF (CSTR:ARG:32 != CSTR:ARG:34) || (CSTR:ARG:33 != CSTR:ARG:35)
	PRINTL 【변신 후】　눈동자 색　을 선택해 주십시오.
	PRINT [0] 변신 후의 색 [
	CALL SETCOLOR_BY_STR, CSTR:ARG:34
	PRINT ■
	RESETCOLOR
	PRINT ][
	CALL SETCOLOR_BY_STR, CSTR:ARG:35
	PRINT ■
	RESETCOLOR
	PRINTL ] 을 인계한다
	PRINT [1] 평상시의 색 [
	CALL SETCOLOR_BY_STR, CSTR:ARG:32
	PRINT ■
	RESETCOLOR
	PRINT ][
	CALL SETCOLOR_BY_STR, CSTR:ARG:33
	PRINT ■
	RESETCOLOR
	PRINTL ] 을 인계한다
	$INPUT_LOOP_2
	INPUT
	IF RESULT == 1
		CSTR:34 = %CSTR:32%
		CSTR:35 = %CSTR:33%
	ELSEIF RESULT != 0
		GOTO INPUT_LOOP_2
	ENDIF
	PRINTL 
ENDIF
IF CSTR:ARG:36 != CSTR:ARG:37
	PRINTL 【변신 후】　피부색　을 선택해 주십시오.
	PRINT [0] 변신 후의 색 [
	CALL SETCOLOR_BY_STR, CSTR:ARG:37
	PRINT ■
	RESETCOLOR
	PRINTL ] 을 인계한다
	PRINT [1] 평상시의 색 [
	CALL SETCOLOR_BY_STR, CSTR:ARG:36
	PRINT ■
	RESETCOLOR
	PRINTL ] 을 인계한다
	$INPUT_LOOP_3
	INPUT
	IF RESULT == 1
		CSTR:37 = %CSTR:36%
	ELSEIF RESULT != 0
		GOTO INPUT_LOOP_3
	ENDIF
	PRINTL 
ENDIF

SIF TRANS > 0
	CALL TRANSFORM, 1

TARGET = KEEP
RETURN 1



;통상의 여체화 처리
;--------------------------------------------------------------------------------------------------------------------------------------------------------------
@TS_NORMAL, ARG
#DIM KEEP
#DIM TRANS
#DIM BREAST
#DIM BODY
KEEP = TARGET
TARGET = ARG

IF CHARATALENT_F(TARGET,0,"남자") == 0
	PRINTFORMW 　! ERROR ! 평상시의 성별이 여성인데도 통상적인 여체화 시퀀스가 호출되었습니다!
ENDIF

IF CFLAG:1 > 0
	TRANS = 1
ELSE
	TRANS = 0
ENDIF

;우선은 변신을 해제한다
CALL TRANSFORM, 0

PRINTL 【평상시】　가슴 사이즈　를 선택해 주십시오.
IF TALENT:변신시ＴＳ > 0
	PRINT [0] 변신 후 [
	IF CHARATALENT_F(TARGET,1,"절벽") > 0
		PRINT 절벽
		BREAST = -2
	ELSEIF CHARATALENT_F(TARGET,1,"빈유") > 0
		PRINT 빈유
		BREAST = -1
	ELSEIF CHARATALENT_F(TARGET,1,"기유") > 0
		PRINT 기유
		BREAST = 5
	ELSEIF CHARATALENT_F(TARGET,1,"마유") > 0
		PRINT 마유
		BREAST = 4
	ELSEIF CHARATALENT_F(TARGET,1,"초유") > 0
		PRINT 초유
		BREAST = 3
	ELSEIF CHARATALENT_F(TARGET,1,"폭유") > 0
		PRINT 폭유
		BREAST = 2
	ELSEIF CHARATALENT_F(TARGET,1,"거유") > 0
		PRINT 거유
		BREAST = 1
	ELSE
		PRINT 보통
		BREAST = 0
	ENDIF
	PRINTL ] 에 맞춘다
ENDIF
PRINTL [1] 절벽　　[2] 빈유　　[3] 보통　　
PRINTL [4] 거유　　[5] 폭유　　[6] 초유　　[7] 마유　　[8] 기유　　
$INPUT_LOOP_1
INPUT
IF RESULT == 0 && TALENT:변신시ＴＳ > 0
	;가슴 사이즈를 변신 후에 맞춘다
	IF CHARATALENT_F(TARGET,1,"절벽") > 0
		TALENT:빈유 = 2
		TALENT:거유 = 0
	ELSEIF CHARATALENT_F(TARGET,1,"빈유") > 0
		TALENT:빈유 = 1
		TALENT:거유 = 0
	ELSEIF CHARATALENT_F(TARGET,1,"기유") > 0
		TALENT:빈유 = 0
		TALENT:거유 = 5
	ELSEIF CHARATALENT_F(TARGET,1,"마유") > 0
		TALENT:빈유 = 0
		TALENT:거유 = 4
	ELSEIF CHARATALENT_F(TARGET,1,"초유") > 0
		TALENT:빈유 = 0
		TALENT:거유 = 3
	ELSEIF CHARATALENT_F(TARGET,1,"폭유") > 0
		TALENT:빈유 = 0
		TALENT:거유 = 2
	ELSEIF CHARATALENT_F(TARGET,1,"거유") > 0
		TALENT:빈유 = 0
		TALENT:거유 = 1
	ENDIF
ELSEIF RESULT == 1
	TALENT:빈유 = 2
	TALENT:거유 = 0
ELSEIF RESULT == 2
	TALENT:빈유 = 1
	TALENT:거유 = 0
ELSEIF RESULT == 3
	TALENT:빈유 = 0
	TALENT:거유 = 0
ELSEIF RESULT == 4
	TALENT:빈유 = 0
	TALENT:거유 = 1
ELSEIF RESULT == 5
	TALENT:빈유 = 0
	TALENT:거유 = 2
ELSEIF RESULT == 6
	TALENT:빈유 = 0
	TALENT:거유 = 3
ELSEIF RESULT == 7
	TALENT:빈유 = 0
	TALENT:거유 = 4
ELSEIF RESULT == 8
	TALENT:빈유 = 0
	TALENT:거유 = 5
ELSE
	GOTO INPUT_LOOP_1
ENDIF
;변신시가슴사이즈변동 조정
SIF TALENT:변신시ＴＳ > 0
	TALENT:변신시가슴사이즈변동 = BREAST - TALENT:거유 + TALENT:빈유
PRINTL 

PRINTL 【평상시】　체격　을 선택해 주십시오.
IF TALENT:변신능력 > 0
	IF CHARATALENT_F(TARGET,1,"왜소함") > 0
		BODY = -1
	ELSEIF CHARATALENT_F(TARGET,1,"장신") > 0
		BODY = 1
	ELSE
		BODY = 0
	ENDIF
ENDIF
IF TALENT:변신시ＴＳ > 0
	PRINT [0] 변신 후 [
	IF CHARATALENT_F(TARGET,1,"왜소함") > 0
		PRINT 왜소함
	ELSEIF CHARATALENT_F(TARGET,1,"장신") > 0
		PRINT 장신
	ELSE
		PRINT 보통
	ENDIF
	PRINTL ] 에 맞춘다
ENDIF
PRINT [1] 평상시 [
IF CHARATALENT_F(TARGET,0,"왜소함") > 0
	PRINT 왜소함
ELSEIF CHARATALENT_F(TARGET,0,"장신") > 0
	PRINT 장신
ELSE
	PRINT 보통
ENDIF
PRINTL ] 인 채로 한다
PRINTL [2] 왜소함　　
PRINTL [3] 보통　　　
PRINTL [4] 장신　　　
$INPUT_LOOP_2
INPUT
IF RESULT == 0 && TALENT:변신시ＴＳ > 0
	;체격을 변신 후에 맞춘다
	IF CHARATALENT_F(TARGET,1,"왜소함") > 0
		TALENT:왜소함 = 1
		TALENT:장신 = 0
	ELSEIF CHARATALENT_F(TARGET,1,"장신") > 0
		TALENT:왜소함 = 0
		TALENT:장신 = 1
	ENDIF
ELSEIF RESULT == 1
	;특별히 아무것도 처리하지 않는다
ELSEIF RESULT == 2
	TALENT:왜소함 = 1
	TALENT:장신 = 0
ELSEIF RESULT == 3
	TALENT:왜소함 = 0
	TALENT:장신 = 0
ELSEIF RESULT == 4
	TALENT:왜소함 = 0
	TALENT:장신 = 1
ELSE
	GOTO INPUT_LOOP_2
ENDIF
;변신시가슴사이즈변동 조정
SIF TALENT:변신능력 > 0
	TALENT:변신시체격변동 = BODY - TALENT:장신 + TALENT:왜소함
PRINTL 

IF TALENT:변신능력 > 0 && TALENT:변신시ＴＳ == 0
	PRINTL 【변신 후】　가슴 사이즈　를 선택해 주십시오.
	PRINT [0] 평상시 [
	IF CHARATALENT_F(TARGET,0,"절벽") > 0
		PRINT 절벽
	ELSEIF CHARATALENT_F(TARGET,0,"빈유") > 0
		PRINT 빈유
	ELSEIF CHARATALENT_F(TARGET,0,"기유") > 0
		PRINT 기유
	ELSEIF CHARATALENT_F(TARGET,0,"마유") > 0
		PRINT 마유
	ELSEIF CHARATALENT_F(TARGET,0,"초유") > 0
		PRINT 초유
	ELSEIF CHARATALENT_F(TARGET,0,"폭유") > 0
		PRINT 폭유
	ELSEIF CHARATALENT_F(TARGET,0,"거유") > 0
		PRINT 거유
	ELSE
		PRINT 보통
	ENDIF
	PRINTL ] 에 맞춘다
	PRINTL [1] 절벽　　[2] 빈유　　[3] 보통　　
	PRINTL [4] 거유　　[5] 폭유　　[6] 초유　　[7] 마유　　[8] 기유　　
	$INPUT_LOOP_3
	INPUT
	IF RESULT == 0
		;가슴 사이즈를 평상시에 맞춘다
		TALENT:변신시가슴사이즈변동 = 0
	ELSEIF RESULT == 1
		TALENT:변신시가슴사이즈변동 = TALENT:빈유 + TALENT:거유 - 2
	ELSEIF RESULT == 2
		TALENT:변신시가슴사이즈변동 = TALENT:빈유 + TALENT:거유 - 1
	ELSEIF RESULT == 3
		TALENT:변신시가슴사이즈변동 = TALENT:빈유 - TALENT:거유
	ELSEIF RESULT == 4
		TALENT:변신시가슴사이즈변동 = TALENT:빈유 - TALENT:거유 + 1
	ELSEIF RESULT == 5
		TALENT:변신시가슴사이즈변동 = TALENT:빈유 - TALENT:거유 + 2
	ELSEIF RESULT == 6
		TALENT:변신시가슴사이즈변동 = TALENT:빈유 - TALENT:거유 + 3
	ELSEIF RESULT == 7
		TALENT:변신시가슴사이즈변동 = TALENT:빈유 - TALENT:거유 + 4
	ELSEIF RESULT == 8
		TALENT:변신시가슴사이즈변동 = TALENT:빈유 - TALENT:거유 + 5
	ELSE
		GOTO INPUT_LOOP_3
	ENDIF
	PRINTL 

	PRINTL 【변신 후】　체격　을 선택해 주십시오.
	PRINT [0] 평상시 [
	IF CHARATALENT_F(TARGET,0,"왜소함") > 0
		PRINT 왜소함
	ELSEIF CHARATALENT_F(TARGET,0,"장신") > 0
		PRINT 장신
	ELSE
		PRINT 보통
	ENDIF
	PRINTL ] 에 맞춘다
	PRINT [1] 변신 후 [
	IF CHARATALENT_F(TARGET,1,"왜소함") > 0
		PRINT 왜소함
	ELSEIF CHARATALENT_F(TARGET,1,"장신") > 0
		PRINT 장신
	ELSE
		PRINT 보통
	ENDIF
	PRINTL ] 인 채로 한다
	PRINTL [2] 왜소함　　
	PRINTL [3] 보통　　　
	PRINTL [4] 장신　　　
	$INPUT_LOOP_4
	INPUT
	IF RESULT == 0
		;체격을 평상시에 맞춘다
		TALENT:변신시체격변동 = 0
	ELSEIF RESULT == 1
		TALENT:변신시체격변동 = TALENT:변신시체격변동
	ELSEIF RESULT == 2
		TALENT:변신시체격변동 = TALENT:왜소함 + TALENT:장신 - 1
	ELSEIF RESULT == 3
		TALENT:변신시체격변동 = TALENT:왜소함 + TALENT:장신
	ELSEIF RESULT == 4
		TALENT:변신시체격변동 = TALENT:왜소함 - TALENT:장신 + 1
	ELSE
		GOTO INPUT_LOOP_4
	ENDIF
	PRINTL 
ENDIF

PRINTL 【평상시】　외관적 특징　을 선택해 주십시오.
IF TALENT:변신시ＴＳ > 0
	PRINT [0] 변신 후 [
	IF TALENT:변신시외관 == 1
		PRINT 순산형
	ELSEIF TALENT:변신시외관 == 2
		PRINT 포동포동
	ELSEIF TALENT:변신시외관 == 3
		PRINT 유아배
	ELSEIF TALENT:변신시외관 == 4
		PRINT 날씬함
	ELSEIF TALENT:변신시외관 == 5
		PRINT 빵뎅이
	ELSEIF TALENT:변신시외관 == 6
		PRINT 왕뎅이
	ELSE
		PRINT 보통
	ENDIF
	PRINTL ] 에 맞춘다
ENDIF
PRINTL [1] 순산형　　
PRINTL [2] 포동포동　
PRINTL [3] 유아배　　
PRINTL [4] 날씬함　　
PRINTL [5] 빵뎅이　　
PRINTL [6] 왕뎅이　　
PRINTL [7] 보통　　　
$INPUT_LOOP_5
INPUT
IF RESULT == 0 && TALENT:변신시ＴＳ > 0
	;외관을 변신 후에 맞춘다
	TALENT:외관 = TALENT:변신시외관
ELSEIF RESULT >= 1 && RESULT <= 6
	TALENT:외관 = RESULT
ELSEIF RESULT == 7
	TALENT:외관 = 0
ELSE
	GOTO INPUT_LOOP_5
ENDIF
PRINTL 

IF TALENT:변신능력 > 0 && TALENT:변신시ＴＳ == 0
	PRINTL 【변신 후】　외관적 특징　을 선택해 주십시오.
	PRINT [0] 평상시 [
	IF TALENT:외관 == 1
		PRINT 순산형
	ELSEIF TALENT:외관 == 2
		PRINT 포동포동
	ELSEIF TALENT:외관 == 3
		PRINT 유아배
	ELSEIF TALENT:외관 == 4
		PRINT 날씬함
	ELSEIF TALENT:외관 == 5
		PRINT 빵뎅이
	ELSEIF TALENT:외관 == 6
		PRINT 왕뎅이
	ELSE
		PRINT 보통
	ENDIF
	PRINTL ] 에 맞춘다
	PRINTL [1] 순산형　　
	PRINTL [2] 포동포동　
	PRINTL [3] 유아배　　
	PRINTL [4] 날씬함　　
	PRINTL [5] 빵뎅이　　
	PRINTL [6] 왕뎅이　　
	PRINTL [7] 보통　　　
	$INPUT_LOOP_6
	INPUT
	IF RESULT == 0
		;외관을 평상시에 맞춘다
		TALENT:변신시외관 = TALENT:외관
	ELSEIF RESULT >= 1 && RESULT <= 6
		TALENT:변신시외관 = RESULT
	ELSEIF RESULT == 7
		TALENT:변신시외관 = 0
	ELSE
		GOTO INPUT_LOOP_6
	ENDIF
	PRINTL 
ENDIF

IF TALENT:변신시젖기쉬움변동 > 0
	TALENT:젖기쉬움 = 1
ELSEIF TALENT:변신시젖기쉬움변동 < 0
	TALENT:젖기어려움 = 1
ENDIF
IF TALENT:변신시Ｖ감각변동 > 0
	TALENT:Ｖ민감 = 1
ELSEIF TALENT:변신시Ｖ감각변동 < 0
	TALENT:Ｖ둔감 = 1
ENDIF

;실제 성별변화 처리
IF TALENT:변신시ＴＳ > 0
	TALENT:성별변화 = 1
	TALENT:후타나리 = TALENT:변신시후타나리
ELSEIF TALENT:변신능력 > 0
	TALENT:성별변화 = 11
ELSE
	TALENT:성별변화 = 1
ENDIF

TALENT:남자 = 0
TALENT:오토코노코 = 0
TALENT:변신시오토코노코 = 0
SIF TALENT:변신시비처녀 == 0
	TALENT:처녀 = 1

IF TALENT:변신능력 > 0
	IF TALENT:변신시ＴＳ > 0
		TALENT:변신시ＴＳ = -1
		TALENT:변신시비처녀 = 0
	ENDIF
	IF CFLAG:34 > 0
		CALL GENERATE_CHAR_SIZE, TARGET, 1
		MAXBASE:신장 = RESULT:2
		MAXBASE:체중 = RESULT:3
		MAXBASE:가슴둘레 = RESULT:4
		MAXBASE:허리둘레 = RESULT:5
		MAXBASE:골반둘레 = RESULT:6
		MAXBASE:가슴무게 = RESULT:7
	ENDIF
ENDIF

IF CFLAG:34 > 0
	CALL GENERATE_CHAR_SIZE, TARGET, 0
	BASE:신장 = RESULT:2
	BASE:체중 = RESULT:3
	BASE:가슴둘레 = RESULT:4
	BASE:허리둘레 = RESULT:5
	BASE:골반둘레 = RESULT:6
	BASE:가슴무게 = RESULT:7
ENDIF

;머리, 눈, 피부색을 덮어쓴다
IF CSTR:ARG:13 != CSTR:ARG:14
	PRINTL 【평상시】　헤어 스타일　을 선택해 주십시오.
	PRINT [0] 변신 후 헤어 스타일 [
	PRINTS CSTR:ARG:14
	PRINTL ] 을 인계한다
	PRINT [1] 평상시 헤어 스타일 [
	PRINTS CSTR:ARG:13
	PRINTL ] 을 인계한다
	$INPUT_LOOP_0
	INPUT
	IF RESULT == 0
		CSTR:13 = %CSTR:14%
	ELSEIF RESULT != 1
		GOTO INPUT_LOOP_0
	ENDIF
	PRINTL 
ENDIF
IF CSTR:ARG:30 != CSTR:ARG:31
	PRINTL 【평상시】　머리색　을 선택해 주십시오.
	PRINT [0] 변신 후의 색 [
	CALL SETCOLOR_BY_STR, CSTR:ARG:31
	PRINT ■
	RESETCOLOR
	PRINTL ] 을 인계한다
	PRINT [1] 평상시의 색 [
	CALL SETCOLOR_BY_STR, CSTR:ARG:30
	PRINT ■
	RESETCOLOR
	PRINTL ] 을 인계한다
	$INPUT_LOOP_7
	INPUT
	IF RESULT == 0
		CSTR:30 = %CSTR:31%
	ELSEIF RESULT != 1
		GOTO INPUT_LOOP_7
	ENDIF
	PRINTL 
ENDIF
IF TALENT:변신능력 > 0 && TALENT:변신시ＴＳ == 0
	IF CSTR:ARG:31 != CSTR:ARG:30
		PRINTL 【변신 후】　머리색　을 선택해 주십시오.
		PRINT [0] 변신 후의 색 [
		CALL SETCOLOR_BY_STR, CSTR:ARG:31
		PRINT ■
		RESETCOLOR
		PRINTL ] 을 인계한다
		PRINT [1] 평상시의 색 [
		CALL SETCOLOR_BY_STR, CSTR:ARG:30
		PRINT ■
		RESETCOLOR
		PRINTL ] 을 인계한다
		$INPUT_LOOP_8
		INPUT
		IF RESULT == 1
			CSTR:31 = %CSTR:30%
		ELSEIF RESULT != 0
			GOTO INPUT_LOOP_8
		ENDIF
		PRINTL 
	ENDIF
ENDIF
IF (CSTR:ARG:32 != CSTR:ARG:34) || (CSTR:ARG:33 != CSTR:ARG:35)
	PRINTL 【평상시】　눈동자 색　을 선택해 주십시오.
	PRINT [0] 변신 후의 색 [
	CALL SETCOLOR_BY_STR, CSTR:ARG:34
	PRINT ■
	RESETCOLOR
	PRINT ][
	CALL SETCOLOR_BY_STR, CSTR:ARG:35
	PRINT ■
	RESETCOLOR
	PRINTL ] 을 인계한다
	PRINT [1] 평상시의 색 [
	CALL SETCOLOR_BY_STR, CSTR:ARG:32
	PRINT ■
	RESETCOLOR
	PRINT ][
	CALL SETCOLOR_BY_STR, CSTR:ARG:33
	PRINT ■
	RESETCOLOR
	PRINTL ] 을 인계한다
	$INPUT_LOOP_9
	INPUT
	IF RESULT == 0
		CSTR:32 = %CSTR:34%
		CSTR:33 = %CSTR:35%
	ELSEIF RESULT != 1
		GOTO INPUT_LOOP_9
	ENDIF
	PRINTL 
ENDIF
IF TALENT:변신능력 > 0 && TALENT:변신시ＴＳ == 0
	IF (CSTR:ARG:32 != CSTR:ARG:34) || (CSTR:ARG:33 != CSTR:ARG:35)
		PRINTL 【변신 후】　눈동자 색　을 선택해 주십시오.
		PRINT [0] 변신 후의 색 [
		CALL SETCOLOR_BY_STR, CSTR:ARG:34
		PRINT ■
		RESETCOLOR
		PRINT ][
		CALL SETCOLOR_BY_STR, CSTR:ARG:35
		PRINT ■
		RESETCOLOR
		PRINTL ] 을 인계한다
		PRINT [1] 평상시의 색 [
		CALL SETCOLOR_BY_STR, CSTR:ARG:32
		PRINT ■
		RESETCOLOR
		PRINT ][
		CALL SETCOLOR_BY_STR, CSTR:ARG:33
		PRINT ■
		RESETCOLOR
		PRINTL ] 을 인계한다
		$INPUT_LOOP_10
		INPUT
		IF RESULT == 1
			CSTR:34 = %CSTR:32%
			CSTR:35 = %CSTR:33%
		ELSEIF RESULT != 0
			GOTO INPUT_LOOP_10
		ENDIF
		PRINTL 
	ENDIF
ENDIF
IF CSTR:ARG:36 != CSTR:ARG:37
	PRINTL 【평상시】　피부색　을 선택해 주십시오.
	PRINT [0] 변신 후의 색 [
	CALL SETCOLOR_BY_STR, CSTR:ARG:37
	PRINT ■
	RESETCOLOR
	PRINTL ] 을 인계한다
	PRINT [1] 평상시의 색 [
	CALL SETCOLOR_BY_STR, CSTR:ARG:36
	PRINT ■
	RESETCOLOR
	PRINTL ] 을 인계한다
	$INPUT_LOOP_11
	INPUT
	IF RESULT == 0
		CSTR:36 = %CSTR:37%
	ELSEIF RESULT != 1
		GOTO INPUT_LOOP_11
	ENDIF
	PRINTL 
ENDIF
IF TALENT:변신능력 > 0 && TALENT:변신시ＴＳ == 0
	IF CSTR:ARG:36 != CSTR:ARG:37
		PRINTL 【변신 후】　피부색　을 선택해 주십시오.
		PRINT [0] 변신 후의 색 [
		CALL SETCOLOR_BY_STR, CSTR:ARG:37
		PRINT ■
		RESETCOLOR
		PRINTL ] 을 인계한다
		PRINT [1] 평상시의 색 [
		CALL SETCOLOR_BY_STR, CSTR:ARG:36
		PRINT ■
		RESETCOLOR
		PRINTL ] 을 인계한다
		$INPUT_LOOP_12
		INPUT
		IF RESULT == 1
			CSTR:37 = %CSTR:36%
		ELSEIF RESULT != 0
			GOTO INPUT_LOOP_12
		ENDIF
		PRINTL 
	ENDIF
ENDIF

SIF TRANS > 0
	CALL TRANSFORM, 1

TARGET = KEEP
RETURN 1




