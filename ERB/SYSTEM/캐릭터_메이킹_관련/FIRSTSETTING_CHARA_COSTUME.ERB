;겉옷 설정
@FIRSTSETTING_CLOTH_SETTING_OUTER, ARG
$INPUT_LOOP
PRINTL 
PRINTL 겉옷을 선택해 주십시오.
DRAWLINE
LOCAL:1 = 0
LOCAL:2 = 30
FOR LOCAL, 100, 200
	SIF ITEMNAME:LOCAL == ""
		CONTINUE
	IF LOCAL:1 == 3
		LOCAL:1 = 0
		PRINTL 
	ENDIF
	LOCALS:0 = [{LOCAL}] %ITEMNAME:LOCAL%
	PRINTFORM %LOCALS:0,LOCAL:2,LEFT%
	LOCAL:1 += 1
NEXT
PRINTL 
DRAWLINE
PRINTL [0] 변경하지 않고 돌아간다
PRINTL [1] 겉옷을 설정하지 않는다
INPUT
SELECTCASE RESULT
	CASE 0
	CASE 1
		;SIF CFLAG:ARG:40 == 199
		;	CFLAG:ARG:41 = -1
		CFLAG:ARG:40 = -1
		PRINTL 겉옷을 설정하지 않았습니다.
		PRINTW 
	CASE 100 TO 199
		LOCAL = RESULT
		;비전투원 전용
		IF LOCAL == 197 && ITEM:LOCAL == 1 && TALENT:ARG:변신능력 != -1
			PRINTL 
			PRINTFORML %ITEMNAME:LOCAL%
			CALLFORM CLOTH_DESCRIPTION_{LOCAL}
			PRINTL 
			DRAWLINE
			PRINTL [0] 변경하지 않는다
			SETCOLOR 126,126,126
			PRINTL [1] 변경한다
			RESETCOLOR
			$INPUT_LOOP2
			INPUT
			IF RESULT == 0
				GOTO INPUT_LOOP
			ELSEIF RESULT == 1
				GOTO INPUT_LOOP2
			ELSE
				PRINTL 
				PRINTW 올바른 값을 입력해 주십시오.
				GOTO INPUT_LOOP2
			ENDIF

		ELSE
			IF ITEMNAME:RESULT == ""
				PRINTL 
				PRINTW 올바른 값을 입력해 주십시오.
				GOTO INPUT_LOOP
			ENDIF
			
			PRINTL 
			PRINTFORML %ITEMNAME:LOCAL%
			CALLFORM CLOTH_DESCRIPTION_{LOCAL}
			PRINTL 
			DRAWLINE
			PRINTL [0] 변경하지 않는다
			PRINTL [1] 변경한다
			$INPUT_LOOP3
			INPUT
			IF RESULT == 0
				GOTO INPUT_LOOP
			ELSEIF RESULT == 1
				;SIF CFLAG:ARG:40 == 199
				;	CFLAG:ARG:41 = 0
				CFLAG:ARG:40 = LOCAL
				;SIF CFLAG:ARG:40 == 199
				;	CFLAG:ARG:41 = 199
				PRINTFORML 겉옷을 %조사처리(ITEMNAME:LOCAL,"로")% 변경했습니다.
				PRINTW 
			ELSE
				PRINTL 
				PRINTW 올바른 값을 입력해 주십시오.
				GOTO INPUT_LOOP3
			ENDIF
		ENDIF
	CASEELSE
		PRINTL 
		PRINTW 올바른 값을 입력해 주십시오.
		GOTO INPUT_LOOP
ENDSELECT



;----------------------------------------------------------
;겉옷(변신 후) 설정
@FIRSTSETTING_CLOTH_SETTING_OUTER2, ARG
$INPUT_LOOP
PRINTL 
PRINTL 겉옷을 선택해 주십시오.
DRAWLINE
LOCAL:1 = 0
LOCAL:2 = 30
FOR LOCAL, 100, 300
	SIF ITEMNAME:LOCAL == ""
		CONTINUE
	IF LOCAL:1 == 3
		LOCAL:1 = 0
		PRINTL 
	ENDIF
	LOCALS:0 = [{LOCAL}] %ITEMNAME:LOCAL%
	PRINTFORM %LOCALS:0,LOCAL:2,LEFT%
	LOCAL:1 += 1
NEXT

PRINTL 
DRAWLINE
PRINTL [0] 변경하지 않고 돌아간다
PRINTL [1] 겉옷(변신 후)을 설정하지 않는다
INPUT
SELECTCASE RESULT
	CASE 0
	CASE 1
		;SIF CFLAG:ARG:41 == 199
		;	CFLAG:ARG:40 = -1
		CFLAG:ARG:41 = -1
		PRINTL 겉옷(변신 후)을 설정하지 않았습니다.
		PRINTW 
	CASE 100 TO 299
		IF ITEMNAME:RESULT == ""
			PRINTL 
			PRINTW 올바른 값을 입력해 주십시오.
			GOTO INPUT_LOOP
		ENDIF

		LOCAL = RESULT
		PRINTL 
		PRINTFORML %ITEMNAME:LOCAL%
		CALLFORM CLOTH_DESCRIPTION_{LOCAL}
		PRINTL 
		DRAWLINE
		PRINTL [0] 변경하지 않는다
		PRINTL [1] 변경한다
		$INPUT_LOOP3
		INPUT
		IF RESULT == 0
			GOTO INPUT_LOOP
		ELSEIF RESULT == 1
			;SIF CFLAG:ARG:41 == 199
			;	CFLAG:ARG:40 = 0
			;변신 코스튬 커스터마이즈를 초기화
			IF CFLAG:ARG:41 != LOCAL
				FOR LOCAL:1, 600, 700
					EQUIP:ARG:(LOCAL:1) = 0
				NEXT
			ENDIF
			CFLAG:ARG:41 = LOCAL
			;SIF CFLAG:ARG:41 == 199
			;	CFLAG:ARG:40 = 199
			PRINTFORML 겉옷(변신 후)을 %조사처리(ITEMNAME:LOCAL,"로")% 변경했습니다.
			PRINTW 
		ELSE
			PRINTL 
			PRINTW 올바른 값을 입력해 주십시오.
			GOTO INPUT_LOOP3
		ENDIF
	CASEELSE
		PRINTL 
		PRINTW 올바른 값을 입력해 주십시오.
		GOTO INPUT_LOOP
ENDSELECT



;----------------------------------------------------------
;속옷 설정
@FIRSTSETTING_CLOTH_SETTING_INNER, ARG
$INPUT_LOOP
PRINTL 
PRINTL 속옷을 선택해 주십시오.
DRAWLINE
LOCAL:1 = 0
LOCAL:2 = 30
FOR LOCAL, 300, 399
	SIF ITEMNAME:LOCAL == ""
		CONTINUE
	IF LOCAL:1 == 3
		LOCAL:1 = 0
		PRINTL 
	ENDIF
	LOCALS:0 = [{LOCAL}] %ITEMNAME:LOCAL%
	PRINTFORM %LOCALS:0,LOCAL:2,LEFT%
	LOCAL:1 += 1
NEXT
PRINTL 
DRAWLINE
PRINTL [0] 변경하지 않고 돌아간다
PRINTL [1] 속옷을 설정하지 않는다
INPUT
SELECTCASE RESULT
	CASE 0
	CASE 1
		CFLAG:ARG:42 = -1
		PRINTL 속옷을 설정하지 않았습니다.
		PRINTW 
	CASE 300 TO 398
		IF ITEMNAME:RESULT == ""
			PRINTL 
			PRINTW 올바른 값을 입력해 주십시오.
			GOTO INPUT_LOOP
		ENDIF

		LOCAL = RESULT
		PRINTL 
		PRINTFORML %ITEMNAME:LOCAL%
		CALLFORM CLOTH_DESCRIPTION_{LOCAL}
		PRINTL 
		DRAWLINE
		PRINTL [0] 변경하지 않는다
		PRINTL [1] 변경한다
		$INPUT_LOOP3
		INPUT
		IF RESULT == 0
			GOTO INPUT_LOOP
		ELSEIF RESULT == 1
			CFLAG:ARG:42 = LOCAL
			PRINTFORMW 속옷을 %조사처리(ITEMNAME:LOCAL,"로")% 변경했습니다.
			IF CFLAG:ARG:42 != 308
				IF FIGURE_SPLIT(EQUIP:ARG:103, 4) == 2
					;노출 정도
					LOCAL = 0
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 2) == 1
						LOCAL -= 1
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 2) == 2
						LOCAL -= 1
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 2) == 3
						LOCAL -= 2
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 4) == 1
						LOCAL -= 1
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 4) == 2
						LOCAL -= 4

					SIF FIGURE_SPLIT(EQUIP:ARG:103, 2) == 4
						LOCAL += 1
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 4) == 3
						LOCAL += 1
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 4) == 4
						LOCAL += 2
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 5) == 4
						LOCAL += 1

					;보정 효과
					;경장
					SIF LOCAL < 0
						EQUIP:ARG:103 += LOCAL * POWER(10, 9)
					;중장
					SIF LOCAL > 0
						EQUIP:ARG:103 -= LOCAL * POWER(10, 10)
					;속옷 보호 DOWN
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 4) == 2
						EQUIP:ARG:103 -= 4 * POWER(10, 11)
					;속옷 보호 UP
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 4) == 4
						EQUIP:ARG:103 -= 2 * POWER(10, 12)
					SIF FIGURE_SPLIT(EQUIP:ARG:103, 5) == 4
						EQUIP:ARG:103 -= 1 * POWER(10, 12)
					EQUIP:ARG:103 -= 2000
				ENDIF
				IF FIGURE_SPLIT(EQUIP:ARG:3, 4) == 2
					;노출 정도
					LOCAL = 0
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 2) == 1
						LOCAL -= 1
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 2) == 2
						LOCAL -= 1
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 2) == 3
						LOCAL -= 2
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 4) == 1
						LOCAL -= 1
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 4) == 2
						LOCAL -= 4

					SIF FIGURE_SPLIT(EQUIP:ARG:3, 2) == 4
						LOCAL += 1
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 4) == 3
						LOCAL += 1
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 4) == 4
						LOCAL += 2
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 5) == 4
						LOCAL += 1

					;보정 효과
					;경장
					SIF LOCAL < 0
						EQUIP:ARG:3 += LOCAL * POWER(10, 9)
					;중장
					SIF LOCAL > 0
						EQUIP:ARG:3 -= LOCAL * POWER(10, 10)
					;속옷 보호 DOWN
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 4) == 2
						EQUIP:ARG:3 -= 4 * POWER(10, 11)
					;속옷 보호 UP
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 4) == 4
						EQUIP:ARG:3 -= 2 * POWER(10, 12)
					SIF FIGURE_SPLIT(EQUIP:ARG:3, 5) == 4
						EQUIP:ARG:3 -= 1 * POWER(10, 12)
					EQUIP:ARG:3 -= 2000
				ENDIF
			ENDIF
		ELSE
			PRINTL 
			PRINTW 올바른 값을 입력해 주십시오.
			GOTO INPUT_LOOP3
		ENDIF
	CASEELSE
		PRINTL 
		PRINTW 올바른 값을 입력해 주십시오.
		GOTO INPUT_LOOP
ENDSELECT

@FIRSTSETTING_CHARA_COSTUME_PRE(ARG)
;의상 가결정(仮決定)
CFLAG:ARG:45 = CFLAG:ARG:40
CFLAG:ARG:46 = CFLAG:ARG:41
CFLAG:ARG:47 = CFLAG:ARG:42

@FIRSTSETTING_CHARA_COSTUME_LATE(ARG)
;의상 본결정(本決定)
CFLAG:ARG:40 = CFLAG:ARG:45
CFLAG:ARG:41 = CFLAG:ARG:46
CFLAG:ARG:42 = CFLAG:ARG:47

