
;-------------------------------------------------------------------------------------------------------------------------------------------------------------------
;キャラの種族の설정
@FIRSTSETTING_CHARA_SYUZOKU, ARG
#DIM RACE
#DIM FEAT_NUM
#DIM FEAT_SELECT, 300
RACE = -1
;種族の開始番号
LOCAL:1 = 201
;FEAT 개시 번호
LOCAL:2 = 1000
;종족의 수
LOCAL:3 = 11
$MASTER_LOOP
;FEAT 초기화
VARSET FEAT_SELECT
FOR LOCAL, 100, 300
	;所持フィートの読み込み
	SIF TALENT:ARG:(LOCAL + LOCAL:2) > 0
		FEAT_SELECT:LOCAL = 1
NEXT
CALL LB
PRINTFORML ※種族ごとに取得可能なフィートが설정されており、
PRINTFORML 　合計で３つまで選択することができます。
PRINTFORML 　フィート以外の基本性能は同等で種族間の優劣は存在しません。
PRINTL 
PRINTFORML {ARG:0}人目のキャラ 『%CALLNAME:ARG%』 の種族を설정してください
PRINTL ・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・
FOR LOCAL, 0, LOCAL:3
	SIF TALENT:ARG:(LOCAL + LOCAL:1) > 0
		SETCOLOR 128,128,255
	SIF LOCAL < 10
		PRINT  
	PRINTFORML [{LOCAL}]%TALENTNAME:(LOCAL + LOCAL:1)%
	RESETCOLOR
NEXT
$INPUT_LOOP
INPUT
IF RESULT < 0 || RESULT > LOCAL:3
	GOTO INPUT_LOOP
ELSE
	RACE = RESULT
	FOR LOCAL, 100, 300
		SIF FEAT_ABLE_F(RACE + LOCAL:1, LOCAL + LOCAL:2) == 0
			FEAT_SELECT:LOCAL = 0
	NEXT
	CALL LB
	$MASTER_LOOP_1
	;뱀파이어ならば밤악마의귀족を必ず取得
	SIF RACE == 9
		FEAT_SELECT:110 = 1
	;FEAT의 수를 카운트
	FEAT_NUM = 0
	FOR LOCAL, 100, 300
		SIF FEAT_SELECT:LOCAL > 0
			FEAT_NUM ++
	NEXT
	PRINTFORML %TALENTNAME:(RACE + LOCAL:1)%
	CALL SHORTLINE
	CALL SYUZOKU_INFO, (RACE + LOCAL:1)
	PRINTL 
	PRINTL (取得可能フィート)          選択
	FOR LOCAL, 100, 300
		SIF FEAT_ABLE_F(RACE + LOCAL:1, LOCAL + LOCAL:2) == 0
			CONTINUE
		IF LOCAL < 200
			PRINT 　★
		ELSE
			PRINT 　☆
		ENDIF
		PRINTFORM %TALENTNAME:(LOCAL + LOCAL:2),22,LEFT%  [{LOCAL}]  
		IF LOCAL == 110 && FEAT_SELECT:LOCAL > 0
			SETCOLOR 255,0,0
			PRINT ◎
			RESETCOLOR
			PRINTPLAIN  固定取得
		ELSEIF FEAT_SELECT:LOCAL > 0
			SETCOLOR 255,128,0
			PRINT ○
			RESETCOLOR
		ELSE
			PRINT ×
		ENDIF
		PRINTL 
	NEXT
	PRINTL 
	PRINTFORML 選択したフィート({FEAT_NUM}/3)
	SIF FEAT_NUM > 3
		SETCOLOR 128,128,128
	PRINTL [0] 결정
	RESETCOLOR
	PRINTL [1]キャンセル
	$INPUT_LOOP_0
	INPUT
	IF RESULT == 0 && FEAT_NUM <= 3
	ELSEIF RESULT == 1
		GOTO MASTER_LOOP
	ELSEIF RESULT >= 100 && RESULT <= 300 && FEAT_ABLE_F(RACE + LOCAL:1, RESULT + LOCAL:2) > 0
		LOCAL = RESULT
		CALL LB
		CALL FEAT_INFO, (LOCAL + LOCAL:2)
		PRINTL 
		IF FEAT_SELECT:LOCAL > 0
			FEAT_SELECT:LOCAL = 0
		ELSE
			FEAT_SELECT:LOCAL = 1
		ENDIF
		GOTO MASTER_LOOP_1
	ELSE
		GOTO INPUT_LOOP_0
	ENDIF
	;種族の설정
	FOR LOCAL, LOCAL:1, LOCAL:1 + LOCAL:3
		TALENT:ARG:LOCAL = 0
	NEXT
	TALENT:ARG:(RACE + LOCAL:1) = 1
	PRINTFORML 種族を 『%TALENTNAME:(RACE + (LOCAL:1))%』 に설정しました
	;인조인간の場合
	IF RACE == 3
		IF ISFEMALE(ARG)
			PRINTFORML 人工子宮を内蔵させることにより、%CALLNAME:ARG%を임신可能にすることができます
			PRINTFORML [0]임신機能を付ける
			PRINTFORML [1]임신機能を付けない（不妊になります）
			$INPUT_LOOP_1
			INPUT
			IF RESULT == 0
				PRINTFORML %CALLNAME:ARG%は임신可能になります
				TALENT:ARG:미성숙 = 0
			ELSEIF RESULT == 1
				PRINTFORML %CALLNAME:ARG%に임신機能を付けません
				TALENT:ARG:미성숙 = 2
			ELSE
				GOTO INPUT_LOOP_1
			ENDIF
		ENDIF
		IF TALENT:ARG:구상설정 != 1
			PRINTFORML 구상を『ロボ風』に変更しますか？
			PRINTFORML [0]変更する
			PRINTFORML [1]変更しない
			$INPUT_LOOP_2
			INPUT
			IF RESULT == 0
				PRINTFORML 구상をロボ風に설정しました
				TALENT:ARG:구상설정 = 1
			ELSEIF RESULT == 1
				PRINTFORML 설정を変更しません
			ELSE
				GOTO INPUT_LOOP_1
			ENDIF
		ENDIF
	ENDIF
	;FEAT 설정
	FOR LOCAL, 100, 300 
		IF FEAT_SELECT:LOCAL > 0
			TALENT:ARG:(LOCAL + LOCAL:2) = 1
		ELSE
			TALENT:ARG:(LOCAL + LOCAL:2) = 0
		ENDIF
	NEXT
	;프로필에 반영
	CALL SET_PROFILE, ARG
ENDIF
PRINTL 
PRINTL 

;共通설정用
@FIRSTSETTING_racegenre
$loop
FOR local,0,10
	PRINTFORML [{local}]%racegenre:local%
NEXT
printl [99]ランダム
INPUT
IF (INRANGE(RESULT,0,10))
	FLAG:823=RESULT+1
ELSEIF RESULT==99
	FLAG:823=0
ELSE
	goto loop
ENDIF

