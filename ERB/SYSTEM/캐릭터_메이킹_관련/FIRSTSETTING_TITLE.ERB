;**********************************************************
;주제 설정
@FIRSTSETTING_TITLE
PRINTL 주제를 설정하시겠습니까?
PRINTL （『마법소녀』나『미소녀 전대』등, 설정해 두면 변신 후 자칭 구상에서 사용됩니다.）
DRAWLINE
PRINTL [0] 주제 없음
PRINTL [1] 랜덤으로 설정한다
PRINTL [2] 직접 설정한다
PRINTL [99] 돌아간다
$INPUT_LOOP
INPUT
IF RESULT == 0
	FLAG:5 = 0
	PRINTL 주제를 설정하지 않았습니다.
ELSEIF RESULT == 1
	FLAG:5 = 1
	$INPUT_LOOP_CHILD_1_1
	CALL FIRSTSETTING_TITLE_RANDOM
	LOCAL = RESULT
	IF RESULTS == ""
		PRINTFORML 주제를 설정하지 않습니다. 이대로 진행하시겠습니까?
	ELSE
		PRINTFORML 주제를『%RESULTS%』%조사만처리(RESULTS,"로")% 합니다. 이대로 좋습니까?
	ENDIF
	PRINTL [0] 다시 한 번 더 고른다
	PRINTL [1] 네
	SIF SAVESTR:10 != ""
		PRINTFORML [2] 변경하지 않는다（%SAVESTR:10%）
	$INPUT_LOOP_CHILD_1_2
	INPUT
	IF RESULT == 0
		GOTO INPUT_LOOP_CHILD_1_1
	ELSEIF RESULT == 1
		SAVESTR:10 = %RESULTS%
		IF RESULTS == ""
			FLAG:5 = 0
			PRINTFORML 주제를 설정하지 않았습니다.
			RESULTS = 
		ELSE
			PRINTFORML 주제를『%SAVESTR:10%』%조사만처리(SAVESTR:10,"로")% 설정했습니다.
		ENDIF
	ELSEIF RESULT == 2 && SAVESTR:10 != ""
	ELSE
		GOTO INPUT_LOOP_CHILD_1_2
	ENDIF
ELSEIF RESULT == 2
	FLAG:5 = 1
	PRINTL 주제를 입력해 주십시오.
	SIF SAVESTR:10 != ""
		PRINTFORML [999] 변경하지 않는다（%SAVESTR:10%）
	$INPUT_LOOP_CHILD_2
	INPUTS
	IF RESULTS == ""
		GOTO INPUT_LOOP_CHILD_2
	ELSEIF RESULTS == "999"
	ELSE
		SAVESTR:10 = %RESULTS%
		PRINTFORML 주제를『%SAVESTR:10%』%조사만처리(SAVESTR:10,"로")% 설정했습니다.
	ENDIF
ELSEIF RESULT == 99
	RETURN 99
ELSE
	GOTO INPUT_LOOP
ENDIF
PRINTL 

;----------------------------------------------------------
;주제 랜덤 설정
@FIRSTSETTING_TITLE_RANDOM
$REGENERATE_TITLE
PRINTL [0] 일본어 단어로 구성한다
PRINTL [1] 외국어 단어로 구성한다
PRINTL [2] 완전 랜덤
PRINTL [99] 돌아간다
$INPUT_LOOP
INPUT
IF RESULT == 99
	RESULTS = 
	RETURN 99
ENDIF
LOCAL:0 = RESULT
RESULTS = ""
PRINTL
WHILE RESULTS != ""
	FOR LOCAL:1, 0, 20
		IF LOCAL:0 < 0 || LOCAL:0 > 2
			GOTO INPUT_LOOP
		ELSEIF LOCAL:0 == 0
			CALL FIRSTSETTING_TITLE_RANDOM_TOP, 0
			LOCAL:(LOCAL:1 + 10) = RESULT
			CALL FIRSTSETTING_TITLE_RANDOM_BOTTOM, 0
			LOCAL:(LOCAL:1 + 30) = RESULT
			LOCAL:(LOCAL:1 + 50) = 0
		ELSEIF LOCAL:0 == 1
			CALL FIRSTSETTING_TITLE_RANDOM_TOP, 1
			LOCAL:(LOCAL:1 + 10) = RESULT
			CALL FIRSTSETTING_TITLE_RANDOM_BOTTOM, 1
			LOCAL:(LOCAL:1 + 30) = RESULT
			LOCAL:(LOCAL:1 + 50) = 0
		ELSEIF LOCAL:0 == 2
			CALL FIRSTSETTING_TITLE_RANDOM_TOP, RAND:2
			LOCAL:(LOCAL:1 + 10) = RESULT
			CALL FIRSTSETTING_TITLE_RANDOM_BOTTOM, RAND:2
			LOCAL:(LOCAL:1 + 30) = RESULT
			;마지막에 히라가나가 붙는 경우도 있다
			LOCAL:(LOCAL:1 + 50) = 0
			IF RAND:2 == 0
				CALL FIRSTSETTING_TITLE_RANDOM_LAST, 0
				LOCAL:(LOCAL:1 + 50) = RESULT
			ENDIF
		ENDIF
	NEXT

	REPEAT 20
		PRINTFORML [{COUNT, 2}] %STR:(LOCAL:(COUNT + 10))%%STR:(LOCAL:(COUNT + 30))%\@LOCAL:(COUNT + 50) ?%STR:(LOCAL:(COUNT + 50))%#\@
	REND

	PRINTL 
	PRINTL [100] 구성에서 다시 고른다
	PRINTL [200] 재생성

	$INPUT_LOOP2
	INPUT
	IF RESULT >= 0 && RESULT < 20
		RESULTS = %STR:(LOCAL:(RESULT + 10))%%STR:(LOCAL:(RESULT + 30))%\@LOCAL:(RESULT + 50) ?%STR:(LOCAL:(RESULT + 50))%#\@
		RETURN LOCAL:0
	ELSEIF RESULT == 100
		PRINTL
		GOTO REGENERATE_TITLE
	ELSEIF RESULT == 200
		CLEARLINE 24
	ELSE
		GOTO INPUT_LOOP2
	ENDIF
WEND

;----------------------------------------------------------
;윗구
@FIRSTSETTING_TITLE_RANDOM_TOP, ARG:0
IF ARG:0 == 0
	LOCAL = RAND:100
	WHILE STR:LOCAL == ""
		LOCAL = RAND:100
	WEND
	LOCALS = %STR:LOCAL%
ELSEIF ARG:0 == 1
	LOCAL = RAND:100 + 100
	WHILE STR:LOCAL == ""
		LOCAL = RAND:100 + 100
	WEND
	LOCALS = %STR:LOCAL%
ENDIF
RESULTS:1 = %LOCALS%
RETURN LOCAL

;----------------------------------------------------------
;아랫구
@FIRSTSETTING_TITLE_RANDOM_BOTTOM, ARG:0
IF ARG:0 == 0
	LOCAL = RAND:100 + 200
	WHILE STR:LOCAL == ""
		LOCAL = RAND:100 + 200
	WEND
	LOCALS = %STR:LOCAL%
ELSEIF ARG:0 == 1
	LOCAL = RAND:100 + 300
	WHILE STR:LOCAL == ""
		LOCAL = RAND:100 + 300
	WEND
	LOCALS = %STR:LOCAL%
ENDIF
RESULTS:2 = %LOCALS%
RETURN LOCAL

;----------------------------------------------------------
;히라가나
@FIRSTSETTING_TITLE_RANDOM_LAST, ARG:0
IF ARG:0 == 0
	LOCAL = RAND:100 + 400
	WHILE STR:LOCAL == ""
		LOCAL = RAND:100 + 400
	WEND
	LOCALS = %STR:LOCAL%
ELSE
ENDIF
RESULTS:3 = %LOCALS%
RETURN LOCAL
