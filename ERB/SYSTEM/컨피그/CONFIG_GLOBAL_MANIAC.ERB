;GLOBAL　매니악한 성기호 필터
;※체크 함수는
;　필터ーOff(×)라면 1을,
;　필터ーOn(○)라면 0을 반환하는 구조로 되어 있다
;	★혼란 초래하잖아요 이거
;	　옵션 Off(×)라면 0을,
;	　옵션 On(○)라면 1을 반환하는 구조로 한다

;FLAG:850
;사용하는 플래그를 줄이기 위해 이진 표시로
;1 후타나리		1
;2 모유체질		2
;3 기생			4
;4 이형 출산		8
;5 양성평등		16
;6 음문			32
;7~12 음문 서브		64,128,256,512,1024,2048
;13 흑화 캐릭터의 촉수	4096 (※텍스트 관계로 완전한 분기에는 이르지 못했다. 촉수와 자지 어느 쪽을 파고들거나 분기하는 곳에서 사용된다)
;14 그로테스크 표현	8192
;15 스카톨로지 표현	16384
;16 확장도 표시		32768
;17 극단적인 확장	65536
;18 팽유 취득		131072
;19 극단적인 팽유	262144
;20 극단적인 촉수 굵기	524288

;---------------------------------------------
;ARG번째 패치가 ON으로 되어 있는지 체크
;※기본적으로는 이쪽이 아닌 식중함수판을 이용해 주세요
;　이 파일 내에서만 사용되고 있다
;---------------------------------------------
@CONFIG_CHECK_MANIAC,ARG
LOCAL = GETBIT (FLAG:850,ARG)
;　필터ーOff(×)라면 1이, 
;　필터ーOn(○)라면 0이 격납되어 있어 혼란을 초래한다
;통상 옵션, 같은 반환값으로 가급적 결과를 뒤집는다
LOCAL=1-LOCAL
RETURN LOCAL

;식중함수판
;※기본적으로는 이쪽을 사용해서 판정합니다
;　== 1 이라면 해당 요소가 유효(○)、 == 0 이라면 무효(×)입니다
@CONFIG_CHECK_MANIAC_F(ARG)
#FUNCTION
LOCAL = GETBIT (FLAG:850,ARG)
LOCAL=1-LOCAL
RETURNF LOCAL

;---------------------------------------------
;필터 처리
;---------------------------------------------
@CONFIG_F
LOCAL = LINECOUNT
$MASTER_LOOP
PRINTL 
DRAWLINE
PRINTL 성 기호 필터, ×로 설정된 요소는 게임 중에 등장하지 않게 됩니다.
PRINTL
CALL CONFIG_CHECK_MANIAC,1
SETCOLOR 120,255,255
SIF RESULT == 0
	SETCOLOR 105,105,105
PRINTFORML [11] 후타나리 취득　　　　　　　　　【\@RESULT?○#×\@】
CALL CONFIG_CHECK_MANIAC,2
SETCOLOR 120,255,255
SIF RESULT == 0
	SETCOLOR 105,105,105
PRINTFORML [12] 모유체질 취득　　　　　　　　　【\@RESULT?○#×\@】
CALL CONFIG_CHECK_MANIAC,3
SETCOLOR 120,255,255
SIF RESULT == 0
	SETCOLOR 105,105,105
PRINTFORML [13] 기생 취득　　　　　　　　　　　【\@RESULT?○#×\@】
CALL CONFIG_CHECK_MANIAC,4
SETCOLOR 120,255,255
SIF RESULT == 0
	SETCOLOR 105,105,105
PRINTFORML [14] 출산 시 혼혈아(이형) 묘사　　　【\@RESULT?○#×\@】
CALL CONFIG_CHECK_MANIAC,5
SETCOLOR 120,255,255
SIF RESULT == 0
	SETCOLOR 105,105,105
PRINTFORML [15] 양성평등(남자도 범해짐)　　　　【\@RESULT?○#×\@】　※♀과 보추는 항상 피간 대상입니다
CALL CONFIG_CHECK_MANIAC,6
SETCOLOR 120,255,255
SIF RESULT == 0
	SETCOLOR 105,105,105
PRINTFORML [16]%RESULT==1 ? "▲" # "▼"%음문 취득　　　　　　　　　　 【\@RESULT?○#×\@】
IF RESULT == 1
	CALL CONFIG_CHECK_MANIAC,7
	SETCOLOR 120,255,255
	SIF RESULT == 0
		SETCOLOR 105,105,105
	PRINTFORML [17]┣음문：복수 부위 취득　　　　　【\@RESULT?○#×\@】
	CALL CONFIG_CHECK_MANIAC,8
	SETCOLOR 120,255,255
	SIF RESULT == 0
		SETCOLOR 105,105,105 
	PRINTFORML [18]┣음문：복잡화　　　　　　　　　【\@RESULT?○#×\@】
	CALL CONFIG_CHECK_MANIAC,9
	SETCOLOR 120,255,255
	SIF RESULT == 0
		SETCOLOR 105,105,105
	PRINTFORML [19]┣음문：구출 후에도 침식 진행　 【\@RESULT?○#×\@】
	CALL CONFIG_CHECK_MANIAC,10
	SETCOLOR 120,255,255
	SIF RESULT == 0
		SETCOLOR 105,105,105
	PRINTFORML [20]┣음문：진행도와 오염도 연동　　【\@RESULT?○#×\@】
		;(오염도…얼마나 함락에 가까워지고 있는지 보여주는 내부치)
	CALL CONFIG_CHECK_MANIAC,11
	SETCOLOR 120,255,255
	SIF RESULT == 0
		SETCOLOR 105,105,105
	PRINTFORML [21]┣음문：대응 폰트 사용　　　　　【\@RESULT?○#×\@】
	CALL CONFIG_CHECK_MANIAC,12
	SETCOLOR 120,255,255
	SIF RESULT == 0
		SETCOLOR 105,105,105
	PRINTFORML [22]┗음문：Wingdings 폰트 사용　　 【\@RESULT?○#×\@】
ENDIF
CALL CONFIG_CHECK_MANIAC,13
	SETCOLOR 120,255,255
	SIF RESULT == 0
		SETCOLOR 105,105,105
PRINTFORML [23] 기생 함락 캐릭터에 의한 촉수 고문【\@RESULT?○#×\@】
CALL CONFIG_CHECK_MANIAC,14
	SETCOLOR 120,255,255
	SIF RESULT == 0
		SETCOLOR 105,105,105
PRINTFORML [24] 잔혹/하드한 묘사 　　　　　　　【\@RESULT?○#×\@】
CALL CONFIG_CHECK_MANIAC,15
	SETCOLOR 120,255,255
	SIF RESULT == 0
		SETCOLOR 105,105,105
PRINTFORML [25] 스카톨로지 묘사 　 　　　　　　【\@RESULT?○#×\@】
CALL CONFIG_CHECK_MANIAC,16
	SETCOLOR 120,255,255
	SIF RESULT == 0
		SETCOLOR 105,105,105
PRINTFORML [26]%RESULT==1 ? "▲" # "▼"%확장도 표시　  　　　　　　　 【\@RESULT?○#×\@】
IF RESULT == 1
	CALL CONFIG_CHECK_MANIAC,17
	SETCOLOR 120,255,255
	SIF RESULT == 0
		SETCOLOR 105,105,105
	PRINTFORML [27]┣확장：극단적인 확장　　　　　 【\@RESULT?○#×\@】
	CALL CONFIG_CHECK_MANIAC,20
	SETCOLOR 120,255,255
	SIF RESULT == 0
		SETCOLOR 105,105,105
	PRINTFORML [30]┗확장：극단적인 굵기의 촉수　　【\@RESULT?○#×\@】
ENDIF
CALL CONFIG_CHECK_MANIAC,18
	SETCOLOR 120,255,255
	SIF RESULT == 0
		SETCOLOR 105,105,105
PRINTFORML [28]%RESULT==1 ? "▲" # "▼"%팽유 취득   　  　　　　　　　【\@RESULT?○#×\@】
IF RESULT == 1
	CALL CONFIG_CHECK_MANIAC,19
	SETCOLOR 120,255,255
	SIF RESULT == 0
		SETCOLOR 105,105,105
	PRINTFORML [29]┗팽유：극단적인 팽유　　　　　 【\@RESULT?○#×\@】
ENDIF

RESETCOLOR
PRINTL 

	IF CONFIG_CHECK_MANIAC_F(6) == 0
		PRINTL
		PRINTL
		PRINTL
		PRINTL
		PRINTL
		PRINTL
	ENDIF
	IF CONFIG_CHECK_MANIAC_F(16) == 0
		PRINTL
		PRINTL
	ENDIF
	IF CONFIG_CHECK_MANIAC_F(18) == 0
		PRINTL
	ENDIF

PRINTL [200] 변경 사항을 저장하고 돌아간다
PRINTL 

$INPUT_LOOP
INPUT
IF RESULT >= 11 && RESULT <= 31 
	INVERTBIT FLAG:850,(RESULT-10)
	SIF GETBIT(FLAG:850, (RESULT-10)) && RESULT == 21
		CLEARBIT FLAG:850, 12
	SIF GETBIT(FLAG:850, (RESULT-10)) && RESULT == 22
		CLEARBIT FLAG:850, 1
	CLEARLINE LINECOUNT - LOCAL
	GOTO MASTER_LOOP
ELSEIF RESULT == 200
	GLOBAL:4 = FLAG:850
	SAVEGLOBAL
	RETURN
ELSE
	GOTO INPUT_LOOP
ENDIF



