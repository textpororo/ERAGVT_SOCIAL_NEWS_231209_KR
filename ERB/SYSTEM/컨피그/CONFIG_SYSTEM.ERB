;それぞれの컨피그ごとにbitで値を保持
;直接弄るならSETBIT,GETBITなどを使用するが、
;混乱を避けるために
;	・ビット直接操作ではなく下記の種類別関数を利用する
;	・挙動一貫性のために「〇〇しない」は用いず、「〇〇する==有効なら判定結果１」で極力揃える
;
;凡例カテゴリ　フラグ　参照に使う関数()
;0  nビット目に相当するフラグであるか
;
;
;
;컨피그設定関係	FLAG:800	判定式：CONFIG_CHECK_MAIN_F(num)
;0	필터ー系컨피그設定(GLOBAL)の自動ロード
;
;画面表示関係		FLAG:801	判定式：CONFIG_CHECK_SCREEN_F(num)
;0	素質のカテゴリ表示
;1	戦闘中の調教스테이터스 표시
;2	コマンドカテゴリ表示
;3	一部ウェイトの削減
;4	消去した素質(미성숙)の表示
;5～8　戦闘画面の調教스테이터스 표시
;
;イベント関連		FLAG:802	判定式：CONFIG_CHECK_EVENT_F(num)
;0	보스襲撃イベント
;1	새끼 촉수の夜這い
;2	仲間による夜這い
;3	악질 시민イベント
;4	잡몹적との戦闘
;5	악질 시민との戦闘
;6	연인セックス時のゴム装着
;
;ゲームバランス変更	FLAG:803	判定式：CONFIG_CHECK_BALANCE_F(num)
;0	捕獲촉수遭遇率アップ
;1	索敵ターゲット
;2	オート振り解き
;3	搾精強化
;4	返り血
;5	최종 보스強化
;6	力尽きても変身が解けない　※체력, 기력低下や絶頂や敗北時に変身解除されない
;7	A감각が低い時の쾌A増加
;8	敵が行動不能のヒロインを正確に狙う
;
;幽閉・흑화オプション	FLAG:804	判定式：CONFIG_CHECK_PRISON_F(num)
;0	남자の敗北幽閉時に女体化
;1	ヒロイン흑화機能を使用する
;2	┣ただし苗床取得キャラは産む機械に(묘상화取得後は흑화しにくい＝取り込まれ死亡コースに乗りやすい)
;3	┣非戦闘員持ちと희롱특화체질は흑화しない
;4	┗흑화時に容姿を変更する
;5	  ┣髪型の変更を許可する
;6	  ┣머리색の変更を許可する
;7	  ┣目の色の変更を許可する
;8	  ┗肌の色の変更を許可する
;9	악질 시민による幽閉イベントを許可する

;その他オプション	FLAG:805	判定式：CONFIG_CHECK_OTHER_F(num)
;0	娘育成(ONなら촉수に孕まされても娘を임신する場合がある)
;1	항복한다コマンドを使用する
;2	┏임신・出産機能を使用しない(↓と択一)
;3	┗사후피임약使用可能モード(↑と択一)
;4	애널プレイではＶに挿入しない
;5	基本처녀を失わない(全員に성처녀をつけるのと同じ効果)
;6	裏プロフィール(감각進行時、パーソナリティ欄の下部にエロverがなんか出る　プロフィール設定時のみ反映)
;7	FLASH NEWSにバイラルメディア(有害ブログ)を追加する
;8	特殊戦闘イベント中の衣装一時変更を無効化
;--------------------------------------------------
;컨피그
@CONFIG(FROM)
;호출元"mainmenu"か？
#DIMS FROM,1

#DIM PAGE
#DIM LCOUNT
LCOUNT = LINECOUNT
REDRAW 0
PAGE = 0
$MASTER_LOOP
CALL LB
FONTBOLD
SETCOLOR 255,200,50
PRINTFORM  Ｃ　Ｏ　Ｎ　Ｆ　Ｉ　Ｇ
FONTREGULAR
RESETCOLOR
PRINTFORM 　　　　　　　page({PAGE+1}/2)
PRINTL 
DRAWLINE
IF PAGE == 0

	PRINT ★
	SETCOLOR 255,255,150
	PRINTFORML グローバル필터（全セーブデータ共通、グローバル環境に自動上書き）
	RESETCOLOR
	PRINTFORML 　[1000]性嗜好필터
	PRINTFORML 　[2000]잡몹적 필터
	PRINTFORML 　[3000]非戦闘行動時の自動変身
	;PRINTFORML 　[4000]キャラメイクのランダム幅	;未完成！
	PRINTL
	DRAWLINE
	PRINT ★
	SETCOLOR 255,255,150
	PRINTFORML 컨피그関係（セーブデータ個別に設定）

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_MAIN_F(0) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[0]グローバル環境の컨피그設定を使用する
	RESETCOLOR
	PRINTFORML 　[1]SAVE GLOBAL (グローバル環境に手動でセーブ)
	PRINTFORML 　[2]LOAD GLOBAL (グローバル環境から手動ロード)

	PRINT 　●
	SETCOLOR 255,120,60
	PRINTFORML 画面表示関係

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_SCREEN_F(0) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[10]素質をカテゴリ分けして表示する

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_SCREEN_F(1) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[11]戦闘中に調教스테이터스 상승を表示する

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_SCREEN_F(2) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[12]戦闘中のコマンドをカテゴリ分けして表示する

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_SCREEN_F(3) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[13]一部ウェイトの削減

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_SCREEN_F(4) == 0
		SETCOLOR 105,105,105
	;元々は「素質消去後に」だったけど、
	;現状では「미성숙」除去時にその旨出すか否の判定一点にしか使われてないっぽいです＠社会派
	PRINTFORML 　[14]「미성숙」消去後に代替素質を表示する
	RESETCOLOR

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_SCREEN_F(5) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[15]%CONFIG_CHECK_SCREEN_F(5) == 0 ? "▼" # "▲"%戦闘画面に調教스테이터스の一覧を表示する
	RESETCOLOR
	IF CONFIG_CHECK_SCREEN_F(5) == 1
		SETCOLOR 120,255,255
		SIF CONFIG_CHECK_SCREEN_F(6) == 0
			SETCOLOR 105,105,105
		PRINTFORML 　 ┣[16]表示位置を下部に移動
		RESETCOLOR
		SETCOLOR 120,255,255
		SIF CONFIG_CHECK_SCREEN_F(7) == 0
			SETCOLOR 105,105,105
		PRINTFORML 　 ┗[17]表示位置を可変にする
		RESETCOLOR
		;8(18)番は内部で使用(1…収納状態　0…展開状態)
	ENDIF

	PRINT 　●
	SETCOLOR 255,120,120
	PRINTFORML イベント関連

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_EVENT_F(0) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[30]보스 촉수の襲撃

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_EVENT_F(1) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[31]새끼 촉수の夜這い

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_EVENT_F(2) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[32]仲間による夜這い

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_EVENT_F(3) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[33]악질 시민イベント

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_EVENT_F(4) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[34]잡몹적との戦闘
	RESETCOLOR

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_EVENT_F(5) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[35]악질 시민との戦闘
	RESETCOLOR
	
	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_EVENT_F(6) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[36]연인セックス時のゴム装着
	RESETCOLOR
	
	;PRINTL 
	PRINTL 
	PRINTL 

	IF CONFIG_CHECK_SCREEN_F(5) == 0
	PRINTL
	PRINTL
	ENDIF
	
ELSEIF PAGE == 1
	PRINT ★
	SETCOLOR 255,255,150
	PRINTFORML 컨피그関係（続き）
	
	PRINT 　●
	SETCOLOR 120,60,255
	PRINTFORML ゲームバランス変更

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_BALANCE_F(0) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[50]捕獲촉수遭遇率アップを使用する　　　　難易度：低下

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_BALANCE_F(1) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[51]索敵ターゲットを使用する　　　　　　　難易度：低下

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_BALANCE_F(2) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[52]オート振り解き機能を使用する　　　　　難易度：低下

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_BALANCE_F(3) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[53]搾精強化機能を使用する　　　　　　　　難易度：低下

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_BALANCE_F(4) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[54]보스 촉수撃破で返り血　　　　　　　　　難易度：上昇

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_BALANCE_F(5) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[55]최종 보스強化機能　　　　　　　　　　　難易度：上昇

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_BALANCE_F(6) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[56]集中が乱れても変身を維持する　　　　　難易度：低下（大）
	
	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_BALANCE_F(7) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[57]A감각が低い時の쾌A増加　　　　　　　難易度：上昇

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_BALANCE_F(8) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[58]行動不能のヒロインを敵が正確に狙う　　難易度：上昇

	RESETCOLOR
	PRINTL 

	PRINT 　●
	SETCOLOR 60,255,120
	PRINTFORML 幽閉・흑화関連オプション

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_PRISON_F(0) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[60]남자の敗北時に女体化させる
	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_PRISON_F(1) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[61]%CONFIG_CHECK_PRISON_F(1) == 0 ? "▼" # "▲"%ヒロイン흑화機能を使用する
	;↑から派生
	IF CONFIG_CHECK_PRISON_F(1) == 1
		SETCOLOR 120,255,255
		SIF CONFIG_CHECK_PRISON_F(2) == 0
			SETCOLOR 105,105,105
		PRINTFORML 　 ┣[62]ただし묘상화したヒロインは産む機械として取り込む
		SETCOLOR 120,255,255
		SIF CONFIG_CHECK_PRISON_F(3) == 0
			SETCOLOR 105,105,105
		PRINTFORML 　 ┣[63]ただし희롱특화체질を持たない戦闘員だけが흑화する

		SETCOLOR 120,255,255
		SIF CONFIG_CHECK_PRISON_F(4) == 0
			SETCOLOR 105,105,105
		PRINTFORML 　 ┣[64]%CONFIG_CHECK_PRISON_F(4) == 0 ? "▼" # "▲"%흑화時に容姿を変更する
		RESETCOLOR
		IF CONFIG_CHECK_PRISON_F(4) == 1
			SETCOLOR 120,255,255
			SIF CONFIG_CHECK_PRISON_F(5) == 0
				SETCOLOR 105,105,105
			PRINTFORML 　　 ┣[65]髪型の変更を許可する
			RESETCOLOR
			SETCOLOR 120,255,255
			SIF CONFIG_CHECK_PRISON_F(6) == 0
				SETCOLOR 105,105,105
			PRINTFORML 　　 ┣[66]머리색の変更を許可する
			RESETCOLOR
			SETCOLOR 120,255,255
			SIF CONFIG_CHECK_PRISON_F(7) == 0
				SETCOLOR 105,105,105
			PRINTFORML 　　 ┣[67]目の色の変更を許可する
			RESETCOLOR
			SETCOLOR 120,255,255
			SIF CONFIG_CHECK_PRISON_F(8) == 0
				SETCOLOR 105,105,105
			PRINTFORML 　　 ┗[68]肌の色の変更を許可する
			RESETCOLOR
		ENDIF

		SETCOLOR 120,255,255
		SIF CONFIG_CHECK_PRISON_F(9) == 0
			SETCOLOR 105,105,105
		PRINTFORML 　 ┗[69]【촉수의포로】無しでも세뇌ではなく흑화する
	ENDIF
	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_PRISON_F(10) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[70]악질 시민による幽閉を許可する
	RESETCOLOR
	PRINTL 

	PRINT 　●
	SETCOLOR 60,255,120
	PRINTFORML その他オプション

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_OTHER_F(0) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[71]촉수の子種からも娘を임신する可能性がある

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_OTHER_F(1) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[72]항복한다コマンドを使用する

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_OTHER_F(2) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[73]┏임신出産機能を封印する

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_OTHER_F(3) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[74]┗避妊のために사후피임약を使用する

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_OTHER_F(4) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[75]Ａ責め공격では常に後ろの穴にのみ挿入する
	RESETCOLOR
	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_OTHER_F(5) == 0
		SETCOLOR 105,105,105
		;非イベントにおける필터、および性공격に伴う처녀 상실抑制
		;「にくく」というかほぼ完全に抑制される
		;　例外がＶ촉수幽閉中のＶ責め、Ｖ촉수だし意図的な例外だと思われる
	PRINTFORML 　[76]ヒロインが常に성처녀となる（基本的に처녀を喪失しない）
	RESETCOLOR

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_OTHER_F(6) == 0
		SETCOLOR 105,105,105
		;性開発時に「●●●されるのが好き」みたいな表記が出てくる
		;裏プロフィールって響きが淫猥だからあえて多くは語らないこの表記でいいと思う
		;※表のプロフィールが設定されていないと機能しない
	PRINTFORML 　[77]プロフィール設定時に裏プロフィールも使用する
	RESETCOLOR

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_OTHER_F(7) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[78]FLASH NEWSにバイラルメディア(有害ブログ)を追加する
	RESETCOLOR

	SETCOLOR 120,255,255
	SIF CONFIG_CHECK_OTHER_F(8) == 0
		SETCOLOR 105,105,105
	PRINTFORML 　[79]強制衣装変更イベントでも設定通りの衣装を使う
	RESETCOLOR

	;

	IF CONFIG_CHECK_PRISON_F(1) == 0
		PRINTL
		PRINTL
		PRINTL
		PRINTL
		PRINTL
		PRINTL
		PRINTL
		PRINTL
	ELSEIF CONFIG_CHECK_PRISON_F(4) == 0
		PRINTL
		PRINTL
		PRINTL
		PRINTL
	ENDIF
	;レイアウトを０ページ目に合わせるために改行を入れる
ENDIF
PRINTL 
PRINTFORML [100]ページ切り替え
SIF FROM!="mainmenu"
	PRINTFORM [999]現在のセーブデータのみに適用して돌아간다　　
	PRINTFORML [9999]グローバル設定に保存して돌아간다
$INPUT_LOOP
INPUT
IF RESULT == 100
	IF PAGE == 0
		PAGE = 1
	ELSE
		PAGE = 0
	ENDIF
	GOTO MASTER_LOOP
ELSEIF RESULT == 999
ELSEIF RESULT == 9999
	GLOBAL:11 = FLAG:801
	GLOBAL:12 = FLAG:802
	GLOBAL:13 = FLAG:803
	GLOBAL:14 = FLAG:804
	GLOBAL:15 = FLAG:805
	SAVEGLOBAL

;컨피그設定関係
ELSEIF RESULT == 0
	INVERTBIT FLAG:800, 0
	GOTO MASTER_LOOP
ELSEIF RESULT == 1
	GLOBAL:11 = FLAG:801
	GLOBAL:12 = FLAG:802
	GLOBAL:13 = FLAG:803
	GLOBAL:14 = FLAG:804
	GLOBAL:15 = FLAG:805
	SAVEGLOBAL
	PRINTL 現在のグローバル컨피그を保存しました。
	PRINTL ゲームをロードするたびに自動で適用されます。
	PRINTW 
	GOTO MASTER_LOOP
ELSEIF RESULT == 2
	PRINTW 【グローバル컨피그設定を読み込みました】
	FLAG:801 = GLOBAL:11
	FLAG:802 = GLOBAL:12
	FLAG:803 = GLOBAL:13
	FLAG:804 = GLOBAL:14
	FLAG:805 = GLOBAL:15
	;グローバルのアップデート
	CALL UPDATE_GLOBAL
	GOTO MASTER_LOOP
ELSEIF RESULT == 1000
	CALL CONFIG_F
	GOTO MASTER_LOOP
ELSEIF RESULT == 2000
	CALL CONFIG_M
	GOTO MASTER_LOOP
ELSEIF RESULT == 3000
	CALL CONFIG_T
	GOTO MASTER_LOOP
ELSEIF RESULT == 4000
	CALL CONFIG_C
	GOTO MASTER_LOOP
;画面表示関係
ELSEIF RESULT >= 10 && RESULT <= 17
	INVERTBIT FLAG:801, RESULT - 10
	GOTO MASTER_LOOP
;イベント関係
ELSEIF RESULT >= 30 && RESULT <= 34
	INVERTBIT FLAG:802, RESULT - 30
	SIF CONFIG_CHECK_EVENT_F(3) == 0 || CONFIG_CHECK_EVENT_F(4) == 0
		CLEARBIT FLAG:802, 5
	GOTO MASTER_LOOP
ELSEIF RESULT == 35
	SIF CONFIG_CHECK_EVENT_F(3) == 1 && CONFIG_CHECK_EVENT_F(4) == 1
		INVERTBIT FLAG:802, RESULT - 30
	GOTO MASTER_LOOP
ELSEIF RESULT == 36
	INVERTBIT FLAG:802, RESULT - 30
	GOTO MASTER_LOOP
;ゲームバランス変更
ELSEIF RESULT >= 50 && RESULT <= 58
	INVERTBIT FLAG:803, RESULT - 50
	GOTO MASTER_LOOP
;幽閉・흑화関係
ELSEIF RESULT >= 60 && RESULT <= 70
	INVERTBIT FLAG:804, RESULT - 60
	GOTO MASTER_LOOP
;その他オプション　※常時避妊／사후피임약は択一
ELSEIF RESULT == 73 || RESULT == 74
	INVERTBIT FLAG:805, RESULT-71
	CLEARBIT FLAG:805, 2+(74-RESULT)
	GOTO MASTER_LOOP
;その他オプション
ELSEIF RESULT >= 71 && RESULT <=79
	INVERTBIT FLAG:805, RESULT - 71
	GOTO MASTER_LOOP
ELSE
	PRINTL 
	PRINTL 올바른 값을 입력해 주십시오.
	GOTO INPUT_LOOP
ENDIF

;--------------------------------------------------------------------------------
;フラグチェック
@CONFIG_CHECK_MAIN_F(ARG)
#FUNCTION
LOCAL = GETBIT (FLAG:800,ARG)
RETURNF LOCAL
@CONFIG_CHECK_SCREEN_F(ARG)
#FUNCTION
LOCAL = GETBIT (FLAG:801,ARG)
RETURNF LOCAL
@CONFIG_CHECK_EVENT_F(ARG)
#FUNCTION
LOCAL = GETBIT (FLAG:802,ARG)
RETURNF LOCAL
@CONFIG_CHECK_BALANCE_F(ARG)
#FUNCTION
LOCAL = GETBIT (FLAG:803,ARG)
RETURNF LOCAL
@CONFIG_CHECK_PRISON_F(ARG)
#FUNCTION
LOCAL = GETBIT (FLAG:804,ARG)
RETURNF LOCAL
@CONFIG_CHECK_OTHER_F(ARG)
#FUNCTION
LOCAL = GETBIT (FLAG:805,ARG)
RETURNF LOCAL
